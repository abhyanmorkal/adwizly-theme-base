{%- if template == "index" or section.settings.index_page == false -%}
{{ 'swiper-bundle.min.css' | asset_url | stylesheet_tag }}
{{ 'component-swiper-slider.css' | asset_url | stylesheet_tag }}
{%- capture section_styles -%}
{%- capture __css -%}
{%- if section.settings.color_base   != "rgba(0,0,0,0)" -%}--color-base-section:{{ section.settings.color_base }};color:{{ section.settings.color_base }};{%- endif -%}
{%- if section.settings.color_accent != "rgba(0,0,0,0)" -%}--color-accent-section:{{ section.settings.color_accent }};{%- endif -%}
{%- if section.settings.color_lines  != "rgba(0,0,0,0)" -%}--color-lines:{{ section.settings.color_lines }};{%- endif -%}
{%- if section.settings.color_icon  != "rgba(0,0,0,0)" -%}--color-text-icons-block:{{ section.settings.color_icon }};{%- endif -%}
{%- if section.settings.color_icon_hover  != "rgba(0,0,0,0)" -%}--color-text-icons-block-hover:{{ section.settings.color_icon_hover }};{%- endif -%}
{%- endcapture -%}
{%- if __css != blank -%}
 #theme-section-{{ section.id }}{
  {{ __css }}
}
{%- endif -%}
{%- endcapture -%}
<style>{{ section_styles }}
.blurb-header__block__icon svg{
  width: 20px;
  height: 20px;
}
.blurb-header__block__container{
  {%- if section.settings.background != "hide" -%}
  padding:{{ section.settings.v_padding }}px 0px;
  {%- else -%}
  padding: 10px 0;
  {%- endif -%}
  position: relative;
}
.blurb-header__block{
  display:flex;
  flex-direction:row;
  justify-content: center;
  gap:10px;
  align-items:center;
  height: 100%;
}
.blurb-header__block__icon{
  flex-shrink: 0;
}
[data-section-name="blurb-header"] .blurb-header__block__text{
  text-align:left;
}
@media (min-width:1025px){
    [data-section-name="blurb-header"] .page-grid-2>*:not(:last-child):not(:nth-child(2n+2)):before,
    [data-section-name="blurb-header"] .page-grid-3>*:not(:last-child):not(:nth-child(3n+3)):before,
    [data-section-name="blurb-header"] .page-grid-4>*:not(:last-child):not(:nth-child(4n+4)):before,
    [data-section-name="blurb-header"] .page-grid-5>*:not(:last-child):not(:nth-child(5n+5)):before,
    [data-section-name="blurb-header"] .page-grid-6>*:not(:last-child):not(:nth-child(6n+6)):before{
      content: "";
      position:absolute;
      top:0;
      width:1px;
      height:100%;
      background:var(--color-lines);
      left:calc(100% + 15px);
    }
    a.blurb-header__block:hover .blurb-header__block__icon svg path{
      fill:var(--color-text-icons-block-hover, var(--color-accent-section, var(--color-accent)));
    }
}
@media (min-width:577px) and (max-width:1024px){
    [data-section-name="blurb-header"] .page-grid-st-2>*:not(:last-child):not(:nth-child(2n+2)):before,
    [data-section-name="blurb-header"] .page-grid-st-3>*:not(:last-child):not(:nth-child(3n+3)):before,
    [data-section-name="blurb-header"] .page-grid-st-4>*:not(:last-child):not(:nth-child(4n+4)):before{
      content: "";
      position:absolute;
      top:0;
      width:1px;
      height:100%;
      background:var(--color-lines);
      left:calc(100% + 15px);
    }
}
@media (min-width:577px){
  .blurb-header__arrows.swiper-control-container{
    display:none;
  }
  [data-section-name="blurb-header"] [class*="page-grid"]{
    --page-padding:31px;
    row-gap: 16px;
  }
  .blurb-header__block__container--mobile{
    display:none;
  }
}
@media (max-width:576px){
  .blurb-header__block__container--desktop{
    display:none;
  }
  [data-section-name="blurb-header"] [class*="page-grid"]{
    row-gap: 10px;
  }
  [data-section-name="blurb-header"] .swiper{
    width:calc(100% - 50px);
  }
  [data-section-name="blurb-header"] .blurb-header__no-padding{
    margin-left:-15px;
    width:calc(100% + 30px);
  }
  [data-section-name="blurb-header"] .blurb-header__no-padding .swiper-slide{
    padding-left:15px;
    padding-right:15px;
  }
  [data-section-name="blurb-header"] .swiper-slide>*{
    height:100%;
  }
  [data-section-name="blurb-header"] .blurb-header__no-padding .swiper{
    width:100%;
  }
  .blurb-header__arrows{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    pointer-events:none;
    justify-content:space-between;
  }
  .blurb-header__arrows>*{
    pointer-events:all;
  }
  .blurb-header__arrows .custom-swiper-button-prev{
    margin-top:0;
    left:1px;
  }
  .blurb-header__arrows .custom-swiper-button-next{
    margin-top:0;
    right:1px;
  }
}
</style>
{%- render "section-css-background", section:section -%}
{%- render "section-component-top-line", section:section -%}
{%- capture page_width -%}{%- if section.settings.width != "default" %}{{ section.settings.width }}{%- else -%}{{ settings.page_width_main }}{%- endif -%}{%- endcapture -%}
{%- assign section_settings_background = false -%}{%- if section.settings.background != 'hide' and section.settings.background_width == "content_width" -%}{%- assign section_settings_background = true -%}{%- endif -%}
<div id="theme-section-{{ section.id }}"
     class="{% if section.settings.show_lines == false or section.settings.background == 'hide' %}top-spacing-{{ section.settings.top_spacing }}{% endif %}{% if section.settings.background != 'hide' and section.settings.background_width == "fullwidth" %} section-background{% endif %}"
     data-section-name="blurb-header">
  
  <div class="{{ page_width }}{% if section_settings_background %} section-background--mobile-width{% endif %}">
  {%- if section_settings_background -%}<div class="section-background border__radius">{%- endif -%}
    {%- if section.settings.background != 'show' and section.settings.show_parallax -%}<div class="section-background__elements"><div class="section-background__elements__item"></div></div>{%- endif -%}
      {%- capture content -%}
      {%- for block in section.blocks -%}
      <replace-tag>
        <div id="theme-block-{{ block.id }}" {{ block.shopify_attributes }}>

          {%- liquid
              if block.settings.url != blank
              assign html_tag_open = '<a' | append: ' href="' | append: block.settings.url | append:'"'
              assign html_tag_close = '</a>'
              else
              assign html_tag_open = '<div'
              assign html_tag_close = '</div>'
              endif
          -%}

          {{ html_tag_open }} class="clear-underline blurb-header__block mt--first-child-0 mb--last-child-0 {{ section.settings.content_align }} hover-area">
              {%- capture icon_content -%}
              {%- render "component-image-icon",
                  show_icon: block.settings.show_icon,
                  image: block.settings.image,
                  icon: block.settings.icon_name,
                  image_custom_width: section.settings.icon_width,
              -%}
              {%- endcapture -%}
              {%- if icon_content != blank -%}
              <div class="blurb-header__block__icon display-flex">
                  <div class="display-inline-flex">
                      {{ icon_content }}
                  </div>
              </div>
              {%- endif -%}
              {%- if block.settings.block_text != blank -%}
                  {%- if block.settings.url != blank -%}
                  <p class="mt0 body2 blurb-header__block__text heading-color-block-hover{% if section.settings.hover_underline %} animation-underline default-state{% endif %}">{{ block.settings.block_text }}</p>
                  {%- else -%}
                  <p class="mt0 blurb-header__block__text body2">{{ block.settings.block_text }}</p>
                  {%- endif -%}
              {%- endif -%}
          {{ html_tag_close }}
      </replace-tag>
    </div>
    {%- endfor -%}
    {%- endcapture -%}

    <div class="page-grid-sp-1 {{ section.settings.grid_tablet }} {{ section.settings.grid }} justify-content-center blurb-header__block__container blurb-header__block__container--desktop">
      {{ content | replace:"<replace-tag>", "" | replace:"</replace-tag>", "" }}
    </div>
    <div class="page-grid-1 justify-content-center blurb-header__block__container blurb-header__block__container--mobile{% if section.settings.mobile_navigation == 'none' or section.blocks.size <= 1 %} blurb-header__no-padding{% endif %}">
      <swiper-slider class="swiper swiper-loop announcement-bar-header__swiper-mask"
                     data-swiper-desktop-grid="1"
                     data-swiper-desktop-lg-grid="1"
                     data-swiper-desktop-md-grid="1"
                     data-swiper-tablet-grid="1"
                     data-swiper-mobile-grid="1"
                     data-gutter="10"
                     data-gutter-mobile="15"
                     data-grid="1,1,1,1,1"
                     {% if section.settings.autoplay_enabled and request.design_mode == false %} data-autoplay-delay="{{ section.settings.autoplay_time | times: 1000 }}"{% endif %}
                     data-autoplay="{%- if section.settings.autoplay_enabled and request.design_mode == false -%}true{%- else -%}false{%- endif -%}"
                     data-script="{{ 'swiper-bundle.min.js' | asset_url }}"
                     data-loop="true"
        >
        <div class="swiper-wrapper">
          {{ content | replace:"<replace-tag>", "<div class='swiper-slide' lazy='true'>" | replace:"</replace-tag>", "</div>" }}
        </div>
      </swiper-slider>
      <div class="swiper-control-container blurb-header__arrows">
        <div class="custom-swiper-button-prev internal-swiper-custom-button-prev display-flex{% unless section.settings.mobile_navigation contains "arrows" %} hide-mobile-xl-st{% endunless %}">{{- 'icon-arrow-left' | append: settings.system_icon_thickness | inline_asset_content -}}</div>
        <div class="custom-swiper-button-next internal-swiper-custom-button-next display-flex{% unless section.settings.mobile_navigation contains "arrows" %} hide-mobile-xl-st{% endunless %}">{{- 'icon-arrow-right' | append: settings.system_icon_thickness | inline_asset_content -}}</div>
      </div>
    </div>

    {% if section_settings_background %}</div>{%- endif -%}
  </div>
</div>
{%- render "section-component-top-line", section:section, show_line:section.settings.show_lines_bottom -%}
{%- endif -%}

{% schema %}
  {
    "name": "t:header.blurb_header",
  	"tag": "section",
    "enabled_on": {
      "groups": ["header"]
    },
    "settings": [
      {
        "type": "header",
        "content": "Layout"
      },
      {
        "type": "select",
        "id": "top_spacing",
        "options": [
          {
            "value": "none",
            "label": "None"
          },
          {
            "value": "small",
            "label": "Small"
          }
        ],
        "default": "none",
        "label": "Top spacing"
      },
      {
        "type": "select",
        "id": "width",
        "options": [
          {
            "value": "default",
            "label": "Default"
          },
          {
            "value": "page-width",
            "label": "Boxed"
          },
          {
            "value": "page-wide",
            "label": "Wide"
          }
        ],
        "default": "default",
        "label": "Width",
        "info": "The Wide option works for screens with 1440px width and more."
      },
      {
        "type": "select",
        "id": "grid",
        "options": [
            {
                "value": "page-grid-1",
                "label": "1"
            },
            {
                "value": "page-grid-2",
                "label": "2"
            },
            {
                "value": "page-grid-3",
                "label": "3"
            },
            {
                "value": "page-grid-4",
                "label": "4"
            },
            {
                "value": "page-grid-5",
                "label": "5"
            },
            {
                "value": "page-grid-6",
                "label": "6"
            }
        ],
        "default": "page-grid-6",
        "label": "Number of columns"
      },
      {
        "type": "select",
        "id": "grid_tablet",
        "options": [
            {
                "value": "page-grid-st-1",
                "label": "1"
            },
            {
                "value": "page-grid-st-2",
                "label": "2"
            },
            {
                "value": "page-grid-st-3",
                "label": "3"
            },
            {
                "value": "page-grid-st-4",
                "label": "4"
            }
        ],
        "default": "page-grid-st-3",
        "label": "Number of columns on tablet"
      },
      {
        "type": "header",
        "content": "Text"
      },
      {
        "type": "select",
        "id": "content_align",
        "options": [
          {
            "value": "align-items-start",
            "label": "Top"
          },
          {
            "value": "align-items-center",
            "label": "Center"
          }
        ],
        "default": "align-items-center",
        "label": "Align text relative to icon"
      },
      {
        "type": "checkbox",
        "id": "hover_underline",
        "default": true,
        "label": "Underline on hover"
      },
      {
        "type": "checkbox",
        "id": "index_page",
        "default": true,
        "label": "Works only on the home page"
      },
      {
        "type": "header",
        "content": "Mobile slider settings"
      },
      {
        "type": "select",
        "id": "mobile_navigation",
        "options": [
          {
            "value": "none",
            "label": "Disable"
          },
          {
            "value": "arrows",
            "label": "Arrows"
          }
        ],
        "default": "arrows",
        "label": "Navigation"
      },
      {
        "type": "checkbox",
        "id": "autoplay_enabled",
        "default": true,
        "label": "Enable autoplay"
      },
      {
        "type": "range",
        "id": "autoplay_time",
        "min": 2,
        "max": 40,
        "step": 1,
        "unit": "s",
        "label": "Change slides every",
        "info": "It doesn't work in the theme editor. Once done with slide configuration, you may manually switch to the next slide using arrows.",
        "default": 3
      },
      {
        "type": "header",
        "content": "Dividing line"
      },
      {
        "type": "checkbox",
        "id": "show_lines",
        "default": false,
        "label": "Show top line"
      },
      {
        "type": "checkbox",
        "id": "show_lines_bottom",
        "default": false,
        "label": "Show bottom line"
      },
      {
        "visible_if": "{{ section.settings.show_lines == true }}",
        "type": "select",
        "id": "lines_width",
        "options": [
          {
            "value": "fullwidth",
            "label": "Fullwidth"
          },
          {
            "value": "content_width",
            "label": "Content width"
          }
        ],
        "default": "fullwidth",
        "label": "Width",
        "info": "Doesn't work on mobile phone"
      },
      {
        "type": "header",
        "content": "Background"
      },
      {
        "type": "select",
        "id": "background",
        "options": [
          {
            "value": "hide",
            "label": "Hide"
          },
          {
            "value": "color",
            "label": "Color"
          },
          {
            "value": "gradient",
            "label": "Gradient"
          },
          {
            "value": "image",
            "label": "Image"
          }
        ],
        "default": "hide",
        "label": "Background"
      },
      {
        "visible_if": "{{ section.settings.background == 'color' }}",
        "type": "color",
        "id": "color_background",
        "default": "rgba(0,0,0,0)",
        "label": "Color"
      },
      {
        "visible_if": "{{ section.settings.background == 'gradient' }}",
        "type": "color_background",
        "id": "gradient",
        "label": "Gradient"
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "image_picker",
        "id": "background_image",
        "label": "Image"
      },
      {
        "visible_if": "{{ section.settings.background == 'image' and section.settings.background_image != blank }}",
        "type": "range",
        "id": "image_overlay_opacity",
        "min": 0,
        "max": 100,
        "step": 10,
        "unit": "%",
        "label": "Image overlay opacity",
        "default": 0
      },
      {
        "visible_if": "{{ section.settings.background == 'image' and section.settings.background_image != blank and section.settings.image_overlay_opacity > 0 }}",
        "type": "color",
        "id": "image_overlay_color",
        "default":"rgba(0,0,0,0)",
        "label": "Image overlay color"
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "image_picker",
        "id": "background_image_mobile",
        "label": "Image mobile"
      },
      {
        "visible_if": "{{ section.settings.background == 'image' and section.settings.background_image_mobile != blank }}",
        "type": "range",
        "id": "image_overlay_opacity_mobile",
        "min": 0,
        "max": 100,
        "step": 10,
        "unit": "%",
        "label": "Image overlay opacity. Mobile",
        "default": 0
      },
      {
        "visible_if": "{{ section.settings.background == 'image' and section.settings.background_image_mobile != blank and section.settings.image_overlay_opacity_mobile > 0 }}",
        "type": "color",
        "id": "image_overlay_color_mobile",
        "default":"rgba(0,0,0,0)",
        "label": "Image overlay color. Mobile"
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "checkbox",
        "id": "show_parallax",
        "default": false,
        "label": "Enable parallax effect"
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "select",
        "id": "imagealign",
        "label": "Image position",
        "info": "Works for all screens",
        "default": "center",
        "options": [
          {
            "value": "top",
            "label": "Top"
          },
          {
            "value": "center",
            "label": "Center"
          },
          {
            "value": "bottom",
            "label": "Bottom"
          }
        ]
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "select",
        "id": "imagesize",
        "label": "Image size",
        "info": "Works for all screens",
        "default": "cover",
        "options": [
          {
            "value": "cover",
            "label": "Full background size"
          },
          {
            "value": "contain",
            "label": "Contain"
          }
        ]
      },
      {
        "visible_if": "{{ section.settings.background != 'hide' }}",
        "type": "select",
        "id": "background_width",
        "options": [
          {
            "value": "fullwidth",
            "label": "Fullwidth"
          },
          {
            "value": "content_width",
            "label": "Content width"
          }
        ],
        "default": "fullwidth",
        "label": "Width"
      },
      {
        "visible_if": "{{ section.settings.background != 'hide' }}",
        "type": "range",
        "id": "v_padding",
        "min": 10,
        "max": 100,
        "step": 1,
        "unit": "px",
        "label": "Vertical internal padding",
        "default": 10
      },
      {
        "type": "header",
        "content": "Colors"
      },
      {
        "type": "color",
        "id": "color_base",
        "default":"rgba(0,0,0,0)",
        "label": "Link"
      },
      {
        "type": "color",
        "id": "color_accent",
        "default":"rgba(0,0,0,0)",
        "label": "Link hover"
      },
      {
        "type": "color",
        "id": "color_lines",
        "default":"rgba(0,0,0,0)",
        "label": "Lines"
      },
      {
        "type": "color",
        "id": "color_icon",
        "default":"rgba(0,0,0,0)",
        "label": "Icon"
      },
      {
        "type": "color",
        "id": "color_icon_hover",
        "default":"rgba(0,0,0,0)",
        "label": "Icon hover"
      }
    ],
    "blocks": [
      {
        "type": "item",
        "name": "Text",
        "settings": [
          {
            "type": "select",
            "id": "show_icon",
            "options": [
              {
                "value": "none",
                "label": "Hide"
              },
              {
                "value": "image",
                "label": "Image"
              },  
              {
                "value": "svg",
                "label": "Preset icon"
              }
            ],
            "default": "svg",
            "label": "Show icon"
          },
          {
            "visible_if": "{{ block.settings.show_icon == 'image' }}",
            "type": "image_picker",
            "id": "image",
            "label": "Image",
            "info": "200x200px recommended"
          },
          {
            "visible_if": "{{ block.settings.show_icon == 'svg' }}",
            "type": "text",
            "id": "icon_name",
            "default": "wishlist",
            "label": "Preset icon name"
          },
          {
            "type": "textarea",
            "id": "block_text",
            "default": "FREE delivery available",
            "label": "Text"
          },
          {
            "type": "url",
            "id": "url",
            "label": "Link"
          }
        ]
      }
    ],
    "presets": [
      {
      	"name": "t:header.blurb_header",
        "category": "t:categories.header_sections",
        "blocks": [
          {
            "type": "item",
            "settings": {
                "show_icon": "svg",
                "icon_name": "box",
                "block_text": "FREE delivery available"
            }
          },
          {
            "type": "item",
            "settings": {
                "show_icon": "svg",
                "icon_name": "secure",
                "block_text": "1 YEAR guarantee"
            }
          },
          {
            "type": "item",
            "settings": {
                "show_icon": "svg",
                "icon_name": "return",
                "block_text": "30 DAYS returns"
            }
          }
        ]
      }
    ]
  }
{% endschema %}