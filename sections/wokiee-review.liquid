{%- capture css -%}
section-wokiee-review.css,
component-price.css,
component-product-card.css,
section-grid-of-products.css
{%- if section.settings.swipe -%}
,swiper-bundle.min.css,
component-swiper-slider.css
{%- else -%}
,component-masonry.css
{%- endif -%}
{%- endcapture -%}
{%- render 'style-loader', array:css -%}

{%- if section.settings.swipe == false -%}
<script src="{{ 'masonry.pkgd.min.js' | asset_url }}" defer="defer"></script>
{%- endif -%}
{%- if request.design_mode -%}
<script src="{{ 'masonry.pkgd.min.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'swiper-bundle.min.js' | asset_url }}" defer="defer"></script>
{%- endif -%}

{%- capture section_styles -%}
{%- if section.settings.background != 'hide' -%}
{%- liquid
	capture color
	if section.settings.background == 'color'
    echo section.settings.color_background
    else
    echo section.settings.gradient
    endif
    endcapture
-%}
{%- if color != "rgba(0,0,0,0)" and color != blank and section.settings.background != 'image' -%}
#theme-section-{{ section.id }}{
  --color-section-background: {{ color }};
}
{%- endif -%}
{%- assign image = section.settings.background_image -%}
{%- assign image_mobile = section.settings.background_image_mobile -%}
{%- if section.settings.background == 'image' and image != blank -%}
#theme-section-{{ section.id }}.section-background,
#theme-section-{{ section.id }} .section-background{
  {%- assign opacity = section.settings.image_overlay_opacity | divided_by: 100.00 -%}
  {%- if section.settings.image_overlay_color != "rgba(0,0,0,0)" -%}
  --color-image-overlay:{{ section.settings.image_overlay_color.red }}, {{ section.settings.image_overlay_color.green }}, {{ section.settings.image_overlay_color.blue }};
  {%- endif -%}
  background-image:linear-gradient(rgba(var(--color-image-overlay), {{ opacity }}),rgba(var(--color-image-overlay), {{ opacity }})), url("{{ image | image_url: width: image.width }}");
  background-position: {{ section.settings.imagealign }};
  background-repeat: no-repeat;
  background-size: {{ section.settings.imagesize }};
}
{%- endif -%}
{%- if section.settings.background == 'image' and image_mobile != blank -%}
@media (max-width:576px){
  #theme-section-{{ section.id }}.section-background,
  #theme-section-{{ section.id }} .section-background{
    {%- assign opacity = section.settings.image_overlay_opacity | divided_by: 100.00 -%}
    {%- if section.settings.image_overlay_color != "rgba(0,0,0,0)" -%}
    --color-image-overlay:{{ section.settings.image_overlay_color.red }}, {{ section.settings.image_overlay_color.green }}, {{ section.settings.image_overlay_color.blue }};
    {%- endif -%}
    background-image:linear-gradient(rgba(var(--color-image-overlay), {{ opacity }}),rgba(var(--color-image-overlay), {{ opacity }})), url("{{ image_mobile | image_url: width: image_mobile.width }}");
    background-position: {{ section.settings.imagealign }};
    background-repeat: no-repeat;
    background-size: {{ section.settings.imagesize }};
  }
}
{%- endif -%}
{%- if section.settings.remove_bottom_spacing -%}
#theme-section-{{ section.id }}.section-background,
#theme-section-{{ section.id }} .section-background{
  padding-bottom: 0;
}
{%- endif -%}
{%- endif -%}
{%- capture __css -%}
{%- if section.settings.color_base   != "rgba(0,0,0,0)" -%}--color-base-section:{{ section.settings.color_base }};color:{{ section.settings.color_base }};{%- endif -%}
{%- if section.settings.color_accent != "rgba(0,0,0,0)" -%}--color-accent-section:{{ section.settings.color_accent }};{%- endif -%}
{%- if section.settings.color_lines  != "rgba(0,0,0,0)" -%}--color-lines:{{ section.settings.color_lines }};{%- endif -%}
{%- if section.settings.color_text_link   != "rgba(0,0,0,0)" -%}--color-heading-link-block:{{ section.settings.color_text_link }};{%- endif -%}
{%- if section.settings.color_text_link_hover != "rgba(0,0,0,0)" -%}--color-heading-hover-block:{{ section.settings.color_text_link_hover }};{%- endif -%}
{%- if section.settings.color_desc != "rgba(0,0,0,0)" -%}--color-text:{{ section.settings.color_desc }};{%- endif -%}
{%- if section.settings.color_background_box         != "rgba(0,0,0,0)" -%}--color-box-background-block:{{ section.settings.color_background_box }};{%- endif -%}
{%- if section.settings.color_media_arrows    != "rgba(0,0,0,0)" -%}--swiper-pagination-arrow-block:{{ section.settings.color_media_arrows }};{%- endif -%}
{%- if section.settings.color_media_dots      != "rgba(0,0,0,0)" -%}--swiper-pagination-bullet-block:{{ section.settings.color_media_dots }};{%- endif -%}
--color-rating-active:{{ section.settings.color_rating_active }};
--color-rating-base:{{ section.settings.color_rating_base }};
{%- endcapture -%}
{%- if section.settings.color_lines  != "rgba(0,0,0,0)" -%}
#theme-section-{{ section.id }}-line{
--color-lines:{{ section.settings.color_lines }};
}
{%- endif -%}
{%- if __css != blank -%}
#theme-section-{{ section.id }}{
{{ __css }}
}
{%- endif -%}
{%- for block in section.blocks -%}
#theme-section-{{ section.id }} #theme-block-{{ block.id }} .wokiee-review__item__review__active{
  width: {{ block.settings.rating | times: 100 | divided_by: 5 }}%;
}
{%- endfor -%}
{%- endcapture -%}
<style>
{{ section_styles }}
#theme-section-{{ section.id }} .wokiee-review__item__author_image{
  flex:0 0 {{ section.settings.author_image_size }}px;
}
#theme-section-{{ section.id }} .product-card-small{
  padding-bottom:10px;
}
.wokiee-review__item__author_text{
  flex:1;
}
#theme-section-{{ section.id }} .product-card-small__image-container{
  flex: 0 0 {{ section.settings.product_image_size }}px;
}
</style>


{%- assign data_grid_xl = section.settings.grid | split: "page-grid-" | last -%}
{%- assign data_grid_lg = section.settings.grid | split: "page-grid-lg-" | last | split: " " | first -%}
{%- assign data_grid_md = section.settings.grid | split: "page-grid-md-" | last | split: " " | first -%}

{%- capture page_width -%}{%- if section.settings.width != "default" %}{{ section.settings.width }}{%- else -%}{{ settings.page_width_main }}{%- endif -%}{%- endcapture -%}
{%- assign section_settings_background = false -%}{%- if section.settings.background != 'hide' and section.settings.background_width == "content_width" -%}{%- assign section_settings_background = true -%}{%- endif -%}
{%- if section.settings.show_lines -%}
<div class="top-spacing-{{ section.settings.top_spacing }}"></div>
{%- if section.settings.lines_width == "content_width" or section_settings_background %}<div class="{{ page_width }} background__page-padding0">{% endif -%}
  {%- if section_settings_background %}<div class="section-background section-background--no-color">{% endif -%}
  <div id="theme-section-{{ section.id }}-line" class="background__horizontal-line"></div>
{%- if section_settings_background %}</div>{% endif -%}
{%- if section.settings.lines_width == "content_width" or section_settings_background %}</div>{% endif -%}
{%- endif -%}
<div id="theme-section-{{ section.id }}"
     class="{% if section.settings.show_lines == false or section.settings.background == 'hide' %}top-spacing-{{ section.settings.top_spacing }}{% endif %}{% if section.settings.background != 'hide' and section.settings.background_width == "fullwidth" %} section-background section-background--{{ section.settings.background_spacing }}{% endif %}"
     data-section-name="wokiee-review">
  <div class="{{ page_width }}{% if section_settings_background %} section-background--mobile-width{% endif %}">
  {%- if section_settings_background -%}<div class="section-background section-background--{{ section.settings.background_spacing }} border__radius">{%- endif -%}
    {%- if section.settings.background != 'show' and section.settings.show_parallax -%}<div class="section-background__elements"><div class="section-background__elements__item"></div></div>{%- endif -%}
    {%- render "section-heading" section:section -%}

    {%- capture content -%}
    {%- for block in section.blocks -%}
    {%- if section.settings.swipe -%}<div class="swiper-slide" lazy="true">{%- endif -%}      
      {%- liquid
          assign product = block.settings.product
          if block.settings.url != blank or product != blank
          if block.settings.url != blank
          assign html_tag_open = '<a' | append: ' href="' | append: block.settings.url | append:'"'
          assign html_tag_close = '</a>'
          elsif product != blank
          assign html_tag_open = '<a' | append: ' href="' | append: product.url | append:'"'
          assign html_tag_close = '</a>'
          endif
          else
          assign html_tag_open = '<div'
          assign html_tag_close = '</div>'
          endif
      -%}
      {{ html_tag_open }} id="theme-block-{{ block.id }}" class="{% if forloop.first %}wokiee-masonry-grid-sizer {% endif %}wokiee-masonry__item wokiee-review__item hover-area{% if section.settings.grid contains "page-grid-md-1 page-grid-lg-1 page-grid-1" %} wokiee-review__item__listing{% endif %}{% if section.settings.grid_tablet contains "page-grid-st-1" %} wokiee-review__item__listing--tablet{% endif %} a--no-hover-color clear-underline" {{ block.shopify_attributes }}>      
        {%- if product != blank -%}
        {%- liquid
            if section.settings.customize
            assign show_vendor = section.settings.show_vendor
            assign show_price = section.settings.show_price
            assign truncate_product_name = section.settings.truncate_product_name
            assign hover_underline = section.settings.hover_underline
            assign show_badge_on_sale = section.settings.show_badge_on_sale
            assign show_badge_sold_out = section.settings.show_badge_sold_out
            assign show_badge_feature = section.settings.show_badge_feature
            assign enable_rating_product_card = section.settings.enable_rating_product_card
            else
            assign show_vendor = settings.show_vendor_product_card
            assign show_price = settings.show_price_product_card
            assign truncate_product_name = settings.truncate_product_name_product_card
            assign hover_underline = settings.hover_underline_product_card
            assign show_badge_on_sale = settings.show_badge_on_sale_product_card
            assign show_badge_sold_out = settings.show_badge_sold_out_product_card
            assign show_badge_feature = settings.show_badge_feature_product_card
            assign enable_rating_product_card = settings.enable_rating_product_card
            endif
            assign product_limit = section.settings.product_limit
            assign last_characters = 'general.abbreviation_of_text_in_a_section.last_characters' | t
            if section.settings.show_secondary_image
            assign show_secondary_image = "show_secondary_image"
            else
            assign show_secondary_image = false
            endif
        -%}
        <div class="product-card-small hover-area {% if section.settings.image_hover == "default" %}{{ settings.image_hover }}{% else %}{{ section.settings.image_hover }}{% endif %}{% if section.settings.align_content == "center" %} align-items-center{% endif %}">
          {%- if product.featured_media != blank -%}
          <div class="product-card-small__image-container product-card-small__image-container_100 product-card__image-container">
            {%- liquid
                assign image_ratio_value = section.settings.image_ratio
                if forloop.index > 4
                assign load_priority_low = 'true'
                endif
            -%}
            <div class="image-hover-box__container{% if image_ratio_value == '1.00' %} image-hover-box--circle{% endif %}">
              {%- render "component-image-product-card",
                  image_ratio_value: image_ratio_value,
                  image_source: product.featured_media,
                  image_source2: product.media[1],
                  show_image_source2: show_secondary_image,
                  load_priority_low: load_priority_low,
                  section_index: section.index
              -%}
            </div>
          </div>
          {%- endif -%}
          <div class="product-card-small__content mt--first-child-0">
            {%- capture badges -%}
            {%- if product.available == false and show_badge_sold_out -%}
            <span class="badges-item__medium badges-item__sold-out">{{ 'products.product.sold_out' | t }}</span>
            {%- elsif product.compare_at_price > product.price and product.available and show_badge_on_sale -%}
            <span class="badges-item__medium badges-item__sale">{{ 'products.product.on_sale' | t }}</span>
            {%- endif -%}
            {%- if product.metafields.softali.featured_badge != blank and show_badge_feature -%}
            <span class="badges-item__medium badges-item__main">{{ product.metafields.softali.featured_badge }}</span>
            {%- endif -%}
            {%- endcapture -%}
            
            {%- if badges != blank -%}
            <div class="badges__container">{{- badges -}}</div>
            {%- endif -%}
            
            {%- if show_vendor and product.vendor != blank -%}
            <div class="body3 mt10">
              <div class="mt0 product-card-small__meta text-uppercase">{{ product.vendor }}</div>
            </div>
            {%- endif -%}
            <div class="body2 mt3">
              <div class="product-card-small__heading heading-color-block-hover a--no-hover-color clear-underline{% if hover_underline %} animation-underline{% endif %} native-hover">
                {%- if truncate_product_name -%}
                {{ product.title | escape | truncate: 48,last_characters }}
                {%- else -%}
                {{ product.title | escape }}
                {%- endif -%}
              </div>
            </div>
            {%- if show_price and settings.cart_type != "catalog_mode" -%}
            {%- render 'price', product: product, size:settings.product_card_price_size -%}
            {%- endif -%}
            {%- if settings.enable_rating and settings.cart_type != "catalog_mode" -%}{%- if enable_rating_product_card -%}
            {%- render 'review-stars' _product: product -%}
            {%- endif -%}{%- endif -%}
          </div>
        </div>
        {%- endif -%}
        
        {%- if block.settings.showstars -%}
        <div class="wokiee-review__item__review">
          <div class="wokiee-review__item__review__active">
            {{- 'icon-star-review' | append: settings.system_icon_thickness | inline_asset_content -}}
            {{- 'icon-star-review' | append: settings.system_icon_thickness | inline_asset_content -}}
            {{- 'icon-star-review' | append: settings.system_icon_thickness | inline_asset_content -}}
            {{- 'icon-star-review' | append: settings.system_icon_thickness | inline_asset_content -}}
            {{- 'icon-star-review' | append: settings.system_icon_thickness | inline_asset_content -}}
          </div>
          <div class="wokiee-review__item__review__main">
            {{- 'icon-star-review' | append: settings.system_icon_thickness | inline_asset_content -}}
            {{- 'icon-star-review' | append: settings.system_icon_thickness | inline_asset_content -}}
            {{- 'icon-star-review' | append: settings.system_icon_thickness | inline_asset_content -}}
            {{- 'icon-star-review' | append: settings.system_icon_thickness | inline_asset_content -}}
            {{- 'icon-star-review' | append: settings.system_icon_thickness | inline_asset_content -}}
          </div>
        </div>
        {%- endif -%}

        <div class="wokiee-review__item__container">
          {%- if block.settings.heading_text != blank -%}
          {{ '<' | append: section.settings.heading_size }} class="wokiee-review__heading heading-color-block-hover{% if section.settings.hover_underline_title %} animation-underline{% endif %}">
          {{ block.settings.heading_text }}
          {{ '</' | append: section.settings.heading_size }}>
          {%- endif -%}
        
          {%- if block.settings.desc != blank -%}<p class="body2">{{ block.settings.desc }}</p>{%- endif -%}
          <div class="wokiee-review__item__author">
            {%- if block.settings.show_image == "show" -%}
            <div class="wokiee-review__item__author_image">
              <div class="image-hover-box__container change-to__small-radius{% if section.settings.author_image_ratio == '1.00' %} image-hover-box--circle{% endif %}">
                {%- render "component-image",
                    image_ratio_value:section.settings.author_image_ratio,
                    image_source: block.settings.image,
                    section_index: section.index
                -%}
              </div>
            </div>
            {%- endif -%}
            {%- if block.settings.author != blank or block.settings.author_description != blank -%}
            <div class="wokiee-review__item__author_text">
              {%- if block.settings.author != blank -%}<p class="body2 strong">{{ block.settings.author }}</p>{%- endif -%}
              {%- if block.settings.author_description != blank -%}<p class="body3">{{ block.settings.author_description }}</p>{%- endif -%}
            </div>
            {%- endif -%}
          </div>
        </div>
      {{ html_tag_close }}
    {%- if section.settings.swipe -%}</div>{%- endif -%}
    {%- endfor -%}
    {%- endcapture -%}
    
    {%- if section.settings.swipe -%}
    <div class="page-grid-1 no-row-gap swiper-no-mask-mobile{% if section.settings.heading_aligment == "text-center" %} justify-content-center{% endif %}">
      {%- assign data_tablet_grid_lg = section.settings.grid_tablet | split: "page-grid-st-" | last -%}
      {%- assign data_grid = "1," | append: data_tablet_grid_lg | append: "," | append:data_grid_md | append: "," | append:data_grid_lg | append: "," | append:data_grid_xl -%}
      <swiper-slider class="swiper{% if section.settings.swipe_edges == true %} swiper-no-mask{% endif %}"
                     data-swiper-desktop-grid="{{ data_grid_xl }}"
                     data-swiper-desktop-lg-grid="{{ data_grid_lg }}"
                     data-swiper-desktop-md-grid="{{ data_grid_md }}"
                     data-swiper-tablet-grid="{{ data_tablet_grid_lg }}"
                     data-swiper-mobile-grid="1"
                     data-gutter="10"
                     data-gutter-mobile="15"
                     data-grid="{{ data_grid }}"
                     {% if section.settings.autoplay_enabled and request.design_mode == false %} data-autoplay-delay="{{ section.settings.autoplay_time | times: 1000 }}"{% endif %}
                     data-autoplay="{%- if section.settings.autoplay_enabled and request.design_mode == false -%}true{%- else -%}false{%- endif -%}"
                     data-script="{{ 'swiper-bundle.min.js' | asset_url }}"
        >
        <div class="swiper-wrapper swiper-wrapper--max-height">
          {{ content }}
        </div>
      </swiper-slider>
      <div class="swiper-control-container{% if section.settings.heading_aligment == "text-center" %} justify-content-center{% endif %}">
        <div class="custom-swiper-button-prev{% unless section.settings.desktop_navigation contains "arrows" %} hide-desktop{% endunless %}">{{- 'icon-arrow-left' | append: settings.system_icon_thickness | inline_asset_content -}}</div>
        <div class="swiper-pagination{% unless section.settings.desktop_navigation contains "dots" %} hide-desktop{% endunless %}{% unless section.settings.mobile_navigation contains "dots" %} hide-mobile-xl-st{% endunless %}"></div>
        <div class="custom-swiper-button-next{% unless section.settings.desktop_navigation contains "arrows" %} hide-desktop{% endunless %}">{{- 'icon-arrow-right' | append: settings.system_icon_thickness | inline_asset_content -}}</div>
      </div>
    </div>      
    {%- else -%}
    <masonry-items class="page-grid-sp-1 {{ section.settings.grid_tablet }} {{ section.settings.grid }} wokiee-review__container" data-items="{{ section.settings.grid | split: "grid-" | last }}" data-gutter="10">
      {{ content }}
    </masonry-items>
    {%- endif -%}

    {% if section_settings_background %}</div>{%- endif -%}
  </div>
</div>

{%- if section.settings.swipe -%}
<script src="{{ 'swiper-bundle.min.js' | asset_url }}" defer="defer"></script>
{%- endif -%}

{% schema %}
{
  "name": "t:names.reviews",
  "tag": "section",
  "disabled_on": {
    "groups": ["header","footer","custom.popups"]
  },
  "settings": [
    {
      "type": "header",
      "content": "Heading"
    },
    {
      "type": "text",
      "id": "main_subheading",
      "default": "Subheading",
      "label": "Subheading"
    },
    {
      "type": "text",
      "id": "main_heading",
      "default": "t:names.reviews",
      "label": "Heading"
    },
    {
      "type": "textarea",
      "id": "main_desc",
      "default": "Highlight the best collections in your store.",
      "label": "Description"
    },
    {
      "type": "select",
      "id": "heading_aligment",
      "options": [
        {
          "value": "text-left",
          "label": "Left"
        },
        {
          "value": "text-center",
          "label": "Center"
        }
      ],
      "default": "text-center",
      "label": "Heading alignment"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "top_spacing",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "small",
          "label": "Small"
        },
        {
          "value": "medium",
          "label": "Medium"
        },
        {
          "value": "normal",
          "label": "Normal"
        }
      ],
      "default": "normal",
      "label": "Top spacing"
    },
    {
      "type": "select",
      "id": "width",
      "options": [
        {
          "value": "default",
          "label": "Default"
        },
        {
          "value": "page-width",
          "label": "Boxed"
        },
        {
          "value": "page-wide",
          "label": "Wide"
        }
      ],
      "default": "default",
      "label": "Width",
      "info": "The Wide option works for screens with 1440px width and more."
    },
    {
      "type": "select",
      "id": "grid",
      "options": [
        {
          "value": "page-grid-md-1 page-grid-lg-1 page-grid-1",
          "label": "1"
        },
        {
          "value": "page-grid-md-2 page-grid-lg-2 page-grid-2",
          "label": "2"
        },
        {
          "value": "page-grid-md-3 page-grid-lg-3 page-grid-3",
          "label": "3"
        },
        {
          "value": "page-grid-md-4 page-grid-lg-4 page-grid-4",
          "label": "4"
        },
        {
          "value": "page-grid-md-5 page-grid-lg-5 page-grid-5",
          "label": "5"
        },
        {
          "value": "page-grid-md-6 page-grid-lg-6 page-grid-6",
          "label": "6"
        },
        {
          "value": "page-grid-md-6 page-grid-lg-6 page-grid-7",
          "label": "7"
        },
        {
          "value": "page-grid-md-6 page-grid-lg-6 page-grid-8",
          "label": "8"
        }
      ],
      "default": "page-grid-md-4 page-grid-lg-4 page-grid-4",
      "label": "Number of columns"
    },
    {
      "type": "select",
      "id": "grid_tablet",
      "options": [
        {
          "value": "page-grid-st-1",
          "label": "1"
        },
        {
          "value": "page-grid-st-2",
          "label": "2"
        },
        {
          "value": "page-grid-st-3",
          "label": "3"
        },
        {
          "value": "page-grid-st-4",
          "label": "4"
        }
      ],
      "default": "page-grid-st-4",
      "label": "Number of columns on tablet"
    },
    {
      "type": "header",
      "content": "Product"
    },
    {
      "type": "select",
      "id": "align_content",
      "options": [
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "center",
          "label": "Center"
        }
      ],
      "default": "center",
      "label": "Align text relative to image"
    },
    {
      "type": "select",
      "id": "image_hover",
      "options": [
        {
          "value": "default",
          "label": "Basic theme settings"
        },
        {
          "value": "image-hover-none",
          "label": "Disable"
        },
        {
          "value": "image-hover01",
          "label": "Zoom in #1"
        },
        {
          "value": "image-hover01 image-hover01-rotate",
          "label": "Zoom in and rotate"
        },
        {
          "value": "image-hover02",
          "label": "Zoom in #2"
        },
        {
          "value": "image-hover03",
          "label": "Zoom out #1"
        },
        {
          "value": "image-hover04",
          "label": "Zoom out #2"
        },
        {
          "value": "image-hover05",
          "label": "Slide"
        },
        {
          "value": "image-hover06",
          "label": "Shine"
        }
      ],
      "default": "default",
      "label": "Image hover effect"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "options": [
        {
          "value": "auto",
          "label": "Auto"
        },
        {
          "value": "0.75",
          "label": "Portrait (3:4)"
        },
        {
          "value": "1.333333",
          "label": "Landscape (4:3)"
        },
        {
          "value": "1",
          "label": "Square (1:1)"
        },
        {
          "value": "1.00",
          "label": "Round (1:1)"
        },
        {
          "value": "0.5625",
          "label": "Social story (9:16)"
        },
        {
          "value": "1.777777",
          "label": "Widescreen (16:9)"
        }
      ],
      "default": "auto",
      "label": "Image ratio"
    },
    {
      "type": "range",
      "id": "product_image_size",
      "min": 60,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Image size",
      "default": 100
    },
    {
      "type": "checkbox",
      "id": "show_secondary_image",
      "default": true,
      "label": "Show second image on hover"
    },
    {
      "type": "checkbox",
      "id": "customize",
      "default": false,
      "label": "Customize"
    },
    {
      "visible_if": "{{ section.settings.customize == true }}",
      "type": "checkbox",
      "id": "show_vendor",
      "default": true,
      "label": "Show vendor"
    },
    {
      "visible_if": "{{ section.settings.customize == true }}",
      "type": "checkbox",
      "id": "show_price",
      "default": true,
      "label": "Show price"
    },
    {
      "visible_if": "{{ section.settings.customize == true and settings.enable_rating == true }}",
      "type": "checkbox",
      "id": "enable_rating_product_card",
      "default": true,
      "label": "Enable review stars"
    },
    {
      "visible_if": "{{ section.settings.customize == true }}",
      "type": "checkbox",
      "id": "truncate_product_name",
      "default": false,
      "label": "Truncate product name"
    },
    {
      "visible_if": "{{ section.settings.customize == true }}",
      "type": "checkbox",
      "id": "hover_underline",
      "default": true,
      "label": "Underline on hover"
    },
    {
      "visible_if": "{{ section.settings.customize == true }}",
      "type": "checkbox",
      "id": "show_badge_on_sale",
      "default": true,
      "label": "Show badge \"Sale\""
    },
    {
      "visible_if": "{{ section.settings.customize == true }}",
      "type": "checkbox",
      "id": "show_badge_sold_out",
      "default": true,
      "label": "Show badge \"Sold Out\""
    },
    {
      "visible_if": "{{ section.settings.customize == true }}",
      "type": "checkbox",
      "id": "show_badge_feature",
      "default": true,
      "label": "Show badge \"Feature\""
    },
    {
      "type": "header",
      "content": "Review"
    },
    {
      "type": "select",
      "id": "heading_size",
      "options": [
        {
          "value": "h4",
          "label": "Normal"
        },
        {
          "value": "h5",
          "label": "Small"
        }
      ],
      "default": "h5",
      "label": "Heading size"
    },
    {
      "type": "checkbox",
      "id": "hover_underline_title",
      "default": true,
      "label": "Underline on hover"
    },
    {
      "type": "select",
      "id": "author_image_ratio",
      "options": [
        {
          "value": "auto",
          "label": "Auto"
        },
        {
          "value": "0.75",
          "label": "Portrait (3:4)"
        },
        {
          "value": "1.333333",
          "label": "Landscape (4:3)"
        },
        {
          "value": "1",
          "label": "Square (1:1)"
        },
        {
          "value": "1.00",
          "label": "Round (1:1)"
        },
        {
          "value": "0.5625",
          "label": "Social story (9:16)"
        },
        {
          "value": "1.777777",
          "label": "Widescreen (16:9)"
        }
      ],
      "default": "1",
      "label": "Author image ratio"
    },
    {
      "type": "range",
      "id": "author_image_size",
      "min": 60,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Author image size",
      "default": 60
    },
    {
      "type": "header",
      "content": "Slider settings"
    },
    {
      "type": "checkbox",
      "id": "swipe",
      "default": false,
      "label": "Enable slider"
    },
    {
      "visible_if": "{{ section.settings.swipe == true }}",
      "type": "checkbox",
      "id": "swipe_edges",
      "default": false,
      "label": "Show edges"
    },
    {
      "visible_if": "{{ section.settings.swipe == true }}",
      "type": "select",
      "id": "desktop_navigation",
      "options": [
        {
          "value": "none",
          "label": "Disable"
        },
        {
          "value": "dots",
          "label": "Dots"
        },
        {
          "value": "arrows",
          "label": "Arrows"
        },
        {
          "value": "dots_arrows",
          "label": "Dots and arrows"
        }
      ],
      "default": "dots_arrows",
      "label": "Desktop navigation"
    },
    {
      "visible_if": "{{ section.settings.swipe == true }}",
      "type": "select",
      "id": "mobile_navigation",
      "options": [
        {
          "value": "none",
          "label": "Disable"
        },
        {
          "value": "dots",
          "label": "Dots"
        }
      ],
      "default": "dots",
      "label": "Mobile navigation"
    },
    {
      "visible_if": "{{ section.settings.swipe == true }}",
      "type": "checkbox",
      "id": "autoplay_enabled",
      "default": false,
      "label": "Enable autoplay"
    },
    {
      "visible_if": "{{ section.settings.swipe == true and section.settings.autoplay_enabled == true }}",
      "type": "range",
      "id": "autoplay_time",
      "min": 2,
      "max": 40,
      "step": 1,
      "unit": "s",
      "label": "Change slides every",
      "info": "It doesn't work in the theme editor. Once done with slide configuration, you may manually switch to the next slide using arrows.",
      "default": 5
    },
    {
      "type": "header",
      "content": "Dividing line"
    },
    {
      "type": "checkbox",
      "id": "show_lines",
      "default": false,
      "label": "Show"
    },
    {
      "visible_if": "{{ section.settings.show_lines == true }}",
      "type": "select",
      "id": "lines_width",
      "options": [
        {
          "value": "fullwidth",
          "label": "Fullwidth"
        },
        {
          "value": "content_width",
          "label": "Content width"
        }
      ],
      "default": "fullwidth",
      "label": "Width",
      "info": "Doesn't work on mobile phone"
    },
    {
      "type": "header",
      "content": "Background"
    },
    {
      "type": "select",
      "id": "background",
      "options": [
        {
          "value": "hide",
          "label": "Hide"
        },
        {
          "value": "color",
          "label": "Color"
        },
        {
          "value": "gradient",
          "label": "Gradient"
        },
        {
          "value": "image",
          "label": "Image"
        }
      ],
      "default": "hide",
      "label": "Background"
    },
    {
      "visible_if": "{{ section.settings.background == 'color' }}",
      "type": "color",
      "id": "color_background",
      "default": "rgba(0,0,0,0)",
      "label": "Color"
    },
    {
      "visible_if": "{{ section.settings.background == 'gradient' }}",
      "type": "color_background",
      "id": "gradient",
      "label": "Gradient"
    },
    {
      "visible_if": "{{ section.settings.background == 'image' }}",
      "type": "image_picker",
      "id": "background_image",
      "label": "Image"
    },
    {
      "visible_if": "{{ section.settings.background == 'image' and section.settings.background_image != blank }}",
      "type": "range",
      "id": "image_overlay_opacity",
      "min": 0,
      "max": 100,
      "step": 10,
      "unit": "%",
      "label": "Image overlay opacity",
      "default": 0
    },
    {
      "visible_if": "{{ section.settings.background == 'image' and section.settings.background_image != blank and section.settings.image_overlay_opacity > 0 }}",
      "type": "color",
      "id": "image_overlay_color",
      "default":"rgba(0,0,0,0)",
      "label": "Image overlay color"
    },
    {
      "visible_if": "{{ section.settings.background == 'image' }}",
      "type": "image_picker",
      "id": "background_image_mobile",
      "label": "Image mobile"
    },
    {
      "visible_if": "{{ section.settings.background == 'image' and section.settings.background_image_mobile != blank }}",
      "type": "range",
      "id": "image_overlay_opacity_mobile",
      "min": 0,
      "max": 100,
      "step": 10,
      "unit": "%",
      "label": "Image overlay opacity. Mobile",
      "default": 0
    },
    {
      "visible_if": "{{ section.settings.background == 'image' and section.settings.background_image_mobile != blank and section.settings.image_overlay_opacity_mobile > 0 }}",
      "type": "color",
      "id": "image_overlay_color_mobile",
      "default":"rgba(0,0,0,0)",
      "label": "Image overlay color. Mobile"
    },
    {
      "visible_if": "{{ section.settings.background == 'image' }}",
      "type": "checkbox",
      "id": "show_parallax",
      "default": false,
      "label": "Enable parallax effect"
    },
    {
      "visible_if": "{{ section.settings.background == 'image' }}",
      "type": "select",
      "id": "imagealign",
      "label": "Image position",
      "info": "Works for all screens",
      "default": "center",
      "options": [
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "bottom",
          "label": "Bottom"
        }
      ]
    },
    {
      "visible_if": "{{ section.settings.background == 'image' }}",
      "type": "select",
      "id": "imagesize",
      "label": "Image size",
      "info": "Works for all screens",
      "default": "cover",
      "options": [
        {
          "value": "cover",
          "label": "Full background size"
        },
        {
          "value": "contain",
          "label": "Contain"
        }
      ]
    },
    {
      "visible_if": "{{ section.settings.background != 'hide' }}",
      "type": "select",
      "id": "background_width",
      "options": [
        {
          "value": "fullwidth",
          "label": "Fullwidth"
        },
        {
          "value": "content_width",
          "label": "Content width"
        }
      ],
      "default": "fullwidth",
      "label": "Width"
    },
    {
      "visible_if": "{{ section.settings.background != 'hide' }}",
      "type": "select",
      "id": "background_spacing",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "small",
          "label": "Small"
        },
        {
          "value": "medium",
          "label": "Medium"
        },
        {
          "value": "normal",
          "label": "Normal"
        }
      ],
      "default": "normal",
      "label": "Top, bottom spacing"
    },
    {
      "visible_if": "{{ section.settings.background != 'hide' }}",
      "type": "checkbox",
      "id": "remove_bottom_spacing",
      "default": false,
      "label": "Remove bottom spacing"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "color_base",
      "default":"rgba(0,0,0,0)",
      "label": "Base"
    },
    {
      "type": "color",
      "id": "color_accent",
      "default":"rgba(0,0,0,0)",
      "label": "Accent"
    },
    {
      "type": "color",
      "id": "color_lines",
      "default":"rgba(0,0,0,0)",
      "label": "Lines"
    },
    {
      "type": "header",
      "content": "Review"
    },
    {
      "type": "color",
      "id": "color_text_link",
      "default":"rgba(0,0,0,0)",
      "label": "Heading"
    },
    {
      "type": "color",
      "id": "color_text_link_hover",
      "default":"rgba(0,0,0,0)",
      "label": "Heading link hover"
    },
    {
      "type": "color",
      "id": "color_desc",
      "default":"rgba(0,0,0,0)",
      "label": "Description"
    },
    {
      "type": "color",
      "id": "color_background_box",
      "default": "rgba(0,0,0,0)",
      "label": "Text box"
    },
    {
      "type": "header",
      "content": "Rating"
    },
    {
      "type": "color",
      "id": "color_rating_active",
      "default":"#FFAB00",
      "label": "Active"
    },
    {
      "type": "color",
      "id": "color_rating_base",
      "default":"#ffe6b3",
      "label": "Base"
    },
    {
      "type": "header",
      "content": "Media button"
    },
    {
      "type": "color",
      "id": "color_media_arrows",
      "default": "rgba(0,0,0,0)",
      "label": "Slider arrows"
    },
    {
      "type": "color",
      "id": "color_media_dots",
      "default": "rgba(0,0,0,0)",
      "label": "Slider dots"
    }
  ],
  "blocks": [
    {
      "type": "item",
      "name": "Review",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        },
        {
          "type": "select",
          "id": "show_image",
          "options": [
            {
              "value": "hide",
              "label": "Hide"
            },
            {
              "value": "show",
              "label": "Show"
            }
          ],
          "default": "show",
          "label": "Image display"
        },
        {
          "visible_if": "{{ block.settings.show_image == 'show' }}",
          "type": "image_picker",
          "id": "image",
          "label": "Image",
          "info": "The recommended size matches the image size specified in the Image Size option."
        },
        {
          "type": "checkbox",
          "id": "showstars",
          "label": "Show rating",
          "default": true
        },
        {
          "visible_if": "{{ block.settings.showstars == true }}",
          "type":      "range",
          "id":        "rating",
          "min":       1,
          "max":       5,
          "step":      0.1,
          "label":     "Item rating",
          "default":   5
        },
        {
          "type": "text",
          "id": "heading_text",
          "label": "Text",
          "default": "Review title"
        },
        {
          "type": "textarea",
          "id": "desc",
          "label": "Text",
          "default": "Write about a positive experience using your products or services."
        },
        {
          "type": "text",
          "id": "author",
          "label": "Author",
          "default": "Review Author"
        },
        {
          "type": "textarea",
          "id": "author_description",
          "label": "Author description",
          "default": "Short description"
        },
        {
          "visible_if": "{{ block.settings.product == blank }}",
          "type": "url",
          "id": "url",
          "label": "Link"
        }
      ]
    }
  ],
    "presets": [
      {
        "name": "t:names.reviews",
        "category": "t:categories.storytelling",
        "blocks": [
          {
            "type": "item"
          },
          {
            "type": "item"
          },
          {
            "type": "item"
          },
          {
            "type": "item"
          }
        ]
      }
    ]
}
{% endschema %}
