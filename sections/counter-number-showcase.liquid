{%- capture section_styles -%}
{%- capture __css -%}
{%- if section.settings.color_base   != "rgba(0,0,0,0)" -%}--color-base-section:{{ section.settings.color_base }};{%- endif -%}
{%- if section.settings.color_accent != "rgba(0,0,0,0)" -%}--color-accent-section:{{ section.settings.color_accent }};{%- endif -%}
{%- if section.settings.color_lines  != "rgba(0,0,0,0)" -%}--color-lines:{{ section.settings.color_lines }};{%- endif -%}
{%- endcapture -%}
{%- if __css != blank -%}
 #theme-section-{{ section.id }}{
  {{ __css }}
}
{%- endif -%}
{%- for block in section.blocks -%}
{%- capture __css -%}
{%- if block.settings.color_text_link   != "rgba(0,0,0,0)" -%}--color-heading-link-block:{{ block.settings.color_text_link }};{%- endif -%}
{%- if block.settings.color_text_link_hover != "rgba(0,0,0,0)" -%}--color-heading-hover-block:{{ block.settings.color_text_link_hover }};{%- endif -%}
{%- if block.settings.color_desc  != "rgba(0,0,0,0)" -%}--color-text:{{ block.settings.color_desc }};color:{{ block.settings.color_desc }};{%- endif -%}
{%- if block.settings.color_text_icons  != "rgba(0,0,0,0)" -%}--color-text-icons-block:{{ block.settings.color_text_icons }};{%- endif -%}
{%- if block.settings.color_counter  != "rgba(0,0,0,0)" -%}--color-counter-block:{{ block.settings.color_counter }};{%- endif -%}
{%- endcapture -%}
{%- if __css != blank -%}
 #theme-section-{{ section.id }} #theme-block-{{ block.id }}{
  {{ __css }}
}
{%- endif -%}
{%- endfor -%}
{%- endcapture -%}
<style>{{ section_styles }}
  .section-counter-number-showcase{
    display:flex;
    flex-direction:column;
    gap:16px;
  }
  .section-counter-number-showcase__count{
    font-size:64px;
    color: var(--color-counter-block, var(--color-accent-section, var(--color-accent)));
  }
  #theme-section-{{ section.id }} .section-counter-number-showcase__icon svg{
    width: {{ section.settings.icon_width }}px;
    height: {{ section.settings.icon_width }}px;
  }
  @media (min-width:577px){
    .section-counter-number-showcase{
      padding-right:var(--page-padding);
      height: 100%;
    }
    .counter-number-showcase__container.page-grid-2>*:not(:nth-child(2n+2)):not(:last-child) .section-counter-number-showcase,
    .counter-number-showcase__container.page-grid-3>*:not(:nth-child(3n+3)):not(:last-child) .section-counter-number-showcase,
    .counter-number-showcase__container.page-grid-4>*:not(:nth-child(4n+4)):not(:last-child) .section-counter-number-showcase,
    .counter-number-showcase__container.page-grid-5>*:not(:nth-child(5n+5)):not(:last-child) .section-counter-number-showcase,
    .counter-number-showcase__container.page-grid-6>*:not(:nth-child(6n+6)):not(:last-child) .section-counter-number-showcase{
      border-right: 1px solid var(--color-lines);
    }
  }
  @media (max-width:1024px){
    .section-counter-number-showcase__count{
      font-size:48px;
    }
  }
  @media (max-width:576px){
    [class*="page-grid-"].counter-number-showcase__container{
        row-gap:30px;
    }
    [class*="page-grid-"].counter-number-showcase__container>*:not(:first-child){
      padding-top:30px;
      border-top: 1px solid var(--color-lines);
    }
  }
</style>

{%- render "section-css-background", section:section -%}
{%- render "section-component-top-line", section:section -%}
{%- capture page_width -%}{%- if section.settings.width != "default" %}{{ section.settings.width }}{%- else -%}{{ settings.page_width_main }}{%- endif -%}{%- endcapture -%}
{%- assign section_settings_background = false -%}{%- if section.settings.background != 'hide' and section.settings.background_width == "content_width" -%}{%- assign section_settings_background = true -%}{%- endif -%}

<div id="theme-section-{{ section.id }}"
     class="{% if section.settings.show_lines == false or section.settings.background == 'hide' %}top-spacing-{{ section.settings.top_spacing }}{% endif %}{% if section.settings.background != 'hide' and section.settings.background_width == "fullwidth" %} section-background section-background--{{ section.settings.background_spacing }}{% endif %}"
     data-section-name="counter-number-showcase">
  
  <div class="{{ page_width }}{% if section_settings_background %} section-background--mobile-width{% endif %}">
  {%- if section_settings_background -%}<div class="section-background section-background--{{ section.settings.background_spacing }} border__radius">{%- endif -%}
    {%- if section.settings.background != 'show' and section.settings.show_parallax -%}<div class="section-background__elements"><div class="section-background__elements__item"></div></div>{%- endif -%}
    {%- render "section-heading" section:section -%}

    <div class="counter-number-showcase__container page-grid-sp-1 {{ section.settings.grid_tablet }} {{ section.settings.grid }} {{ section.settings.text_align }}">
      {%- for block in section.blocks -%}
      <div id="theme-block-{{ block.id }}" {{ block.shopify_attributes }}>
        <div class="section-counter-number-showcase mt--first-child-0 body2">
          {%- if block.settings.icon_name != blank -%}<div class="section-counter-number-showcase__icon display-flex{% if section.settings.text_align == "text-center" %} justify-content-center{% endif %}">{%- render 'icons-list' icon_name: block.settings.icon_name -%}</div>{%- endif -%}

          {%- if block.settings.counterstart != blank -%}
          <section-counter class="section-counter-number-showcase__count h5"
                           data-counterstart="{{ block.settings.counterstart }}"
                           data-counterend="{{ block.settings.counterend }}"
                           data-decimal_places="{{ block.settings.decimal_places }}"
                           data-separator="{{ block.settings.separator }}"
                           data-decimal="{{ block.settings.decimal }}"
                           data-grouping="{{ block.settings.grouping }}"
                           data-suffix="{{ block.settings.suffix }}"
                           data-prefix="{{ block.settings.prefix }}">{{ block.settings.counterstart }}</section-counter>
          {%- endif -%}

          {%- if block.settings.block_heading != blank -%}
            {%- if block.settings.url != blank -%}
            <h5 class="mt0">
              <a href="{{ block.settings.url }}" class="clear-underline heading-color-block-hover{% if section.settings.hover_underline %} animation-underline{% endif %}">{{ block.settings.block_heading }}</a>
            </h5>
            {%- else -%}<h5 class="mt0 heading-color-block-main">{{ block.settings.block_heading }}</h5>
            {%- endif -%}
          {%- endif -%}
          {%- if block.settings.block_text != blank -%}<p class="mt0">{{ block.settings.block_text }}</p>{%- endif -%}
        </div>
      </div>
      {%- endfor -%}
    </div>

  {% if section_settings_background %}</div>{%- endif -%}
  </div>
</div>


{% schema %}
  {
    "name": "t:names.counter_number_showcase",
  	"tag": "section",
    "disabled_on": {
      "groups": ["header","footer","custom.popups"]
    },
    "settings": [
      {
        "type": "header",
        "content": "Heading"
      },
      {
        "type": "text",
        "id": "main_subheading",
        "default": "Subheading",
        "label": "Subheading"
      },
      {
        "type": "text",
        "id": "main_heading",
        "default": "t:names.counter_number_showcase",
        "label": "Heading"
      },
      {
        "type": "textarea",
        "id": "main_desc",
        "default": "Highlight the best collections in your store",
        "label": "Description"
      },
      {
        "type": "select",
        "id": "heading_aligment",
        "options": [
          {
            "value": "text-left",
            "label": "Left"
          },
          {
            "value": "text-center",
            "label": "Center"
          }
        ],
        "default": "text-center",
        "label": "Heading alignment"
      },
      {
        "type": "header",
        "content": "Layout"
      },
      {
        "type": "select",
        "id": "top_spacing",
        "options": [
          {
            "value": "none",
            "label": "None"
          },
          {
            "value": "small",
            "label": "Small"
          },
          {
            "value": "medium",
            "label": "Medium"
          },
          {
            "value": "normal",
            "label": "Normal"
          }
        ],
        "default": "normal",
        "label": "Top spacing"
      },
      {
        "type": "select",
        "id": "width",
        "options": [
          {
            "value": "default",
            "label": "Default"
          },
          {
            "value": "page-width",
            "label": "Boxed"
          },
          {
            "value": "page-wide",
            "label": "Wide"
          }
        ],
        "default": "default",
        "label": "Width",
        "info": "The Wide option works for screens with 1440px width and more."
      },
      {
        "type": "select",
        "id": "grid",
        "options": [
          {
            "value": "page-grid-2",
            "label": "2"
          },
          {
            "value": "page-grid-3",
            "label": "3"
          },
          {
            "value": "page-grid-4",
            "label": "4"
          },
          {
            "value": "page-grid-5",
            "label": "5"
          },
          {
            "value": "page-grid-6",
            "label": "6"
          }
        ],
        "default": "page-grid-3",
        "label": "Number of columns"
      },
      {
        "type": "select",
        "id": "grid_tablet",
        "options": [
          {
            "value": "page-grid-st-2",
            "label": "2"
          },
          {
            "value": "page-grid-st-3",
            "label": "3"
          },
          {
            "value": "page-grid-st-4",
            "label": "4"
          },
          {
            "value": "page-grid-st-5",
            "label": "5"
          }
        ],
        "default": "page-grid-st-3",
        "label": "Number of columns on tablet"
      },
      {
        "type": "select",
        "id": "text_align",
        "options": [
          {
            "value": "text-left",
            "label": "Left"
          },
          {
            "value": "text-center",
            "label": "Center"
          }
        ],
        "default": "text-center",
        "label": "Text align"
      },
      {
        "type": "range",
        "id": "icon_width",
        "min": 20,
        "max": 100,
        "step": 1,
        "unit": "px",
        "label": "Icon width",
        "default": 40
      },
      {
        "type": "checkbox",
        "id": "hover_underline",
        "default": true,
        "label": "Underline on hover"
      },
      {
        "type": "header",
        "content": "Dividing line"
      },
      {
        "type": "checkbox",
        "id": "show_lines",
        "default": false,
        "label": "Show"
      },
      {
        "visible_if": "{{ section.settings.show_lines == true }}",
        "type": "select",
        "id": "lines_width",
        "options": [
          {
            "value": "fullwidth",
            "label": "Fullwidth"
          },
          {
            "value": "content_width",
            "label": "Content width"
          }
        ],
        "default": "fullwidth",
        "label": "Width",
        "info": "Doesn't work on mobile phone"
      },
      {
        "type": "header",
        "content": "Background"
      },
      {
        "type": "select",
        "id": "background",
        "options": [
          {
            "value": "hide",
            "label": "Hide"
          },
          {
            "value": "color",
            "label": "Color"
          },
          {
            "value": "gradient",
            "label": "Gradient"
          },
          {
            "value": "image",
            "label": "Image"
          }
        ],
        "default": "hide",
        "label": "Background"
      },
      {
        "visible_if": "{{ section.settings.background == 'color' }}",
        "type": "color",
        "id": "color_background",
        "default": "rgba(0,0,0,0)",
        "label": "Color"
      },
      {
        "visible_if": "{{ section.settings.background == 'gradient' }}",
        "type": "color_background",
        "id": "gradient",
        "label": "Gradient"
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "image_picker",
        "id": "background_image",
        "label": "Image"
      },
      {
        "visible_if": "{{ section.settings.background == 'image' and section.settings.background_image != blank }}",
        "type": "range",
        "id": "image_overlay_opacity",
        "min": 0,
        "max": 100,
        "step": 10,
        "unit": "%",
        "label": "Image overlay opacity",
        "default": 0
      },
      {
        "visible_if": "{{ section.settings.background == 'image' and section.settings.background_image != blank and section.settings.image_overlay_opacity > 0 }}",
        "type": "color",
        "id": "image_overlay_color",
        "default":"rgba(0,0,0,0)",
        "label": "Image overlay color"
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "image_picker",
        "id": "background_image_mobile",
        "label": "Image mobile"
      },
      {
        "visible_if": "{{ section.settings.background == 'image' and section.settings.background_image_mobile != blank }}",
        "type": "range",
        "id": "image_overlay_opacity_mobile",
        "min": 0,
        "max": 100,
        "step": 10,
        "unit": "%",
        "label": "Image overlay opacity. Mobile",
        "default": 0
      },
      {
        "visible_if": "{{ section.settings.background == 'image' and section.settings.background_image_mobile != blank and section.settings.image_overlay_opacity_mobile > 0 }}",
        "type": "color",
        "id": "image_overlay_color_mobile",
        "default":"rgba(0,0,0,0)",
        "label": "Image overlay color. Mobile"
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "checkbox",
        "id": "show_parallax",
        "default": false,
        "label": "Enable parallax effect"
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "select",
        "id": "imagealign",
        "label": "Image position",
        "info": "Works for all screens",
        "default": "center",
        "options": [
          {
            "value": "top",
            "label": "Top"
          },
          {
            "value": "center",
            "label": "Center"
          },
          {
            "value": "bottom",
            "label": "Bottom"
          }
        ]
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "select",
        "id": "imagesize",
        "label": "Image size",
        "info": "Works for all screens",
        "default": "cover",
        "options": [
          {
            "value": "cover",
            "label": "Full background size"
          },
          {
            "value": "contain",
            "label": "Contain"
          }
        ]
      },
      {
        "visible_if": "{{ section.settings.background != 'hide' }}",
        "type": "select",
        "id": "background_width",
        "options": [
          {
            "value": "fullwidth",
            "label": "Fullwidth"
          },
          {
            "value": "content_width",
            "label": "Content width"
          }
        ],
        "default": "fullwidth",
        "label": "Width"
      },
      {
        "visible_if": "{{ section.settings.background != 'hide' }}",
        "type": "select",
        "id": "background_spacing",
        "options": [
          {
            "value": "none",
            "label": "None"
          },
          {
            "value": "small",
            "label": "Small"
          },
          {
            "value": "medium",
            "label": "Medium"
          },
          {
            "value": "normal",
            "label": "Normal"
          }
        ],
        "default": "normal",
        "label": "Top, bottom spacing"
      },
      {
        "visible_if": "{{ section.settings.background != 'hide' }}",
        "type": "checkbox",
        "id": "remove_bottom_spacing",
        "default": false,
        "label": "Remove bottom spacing"
      },
      {
        "type": "header",
        "content": "Colors"
      },
      {
        "type": "color",
        "id": "color_base",
        "default":"rgba(0,0,0,0)",
        "label": "Base"
      },
      {
        "type": "color",
        "id": "color_accent",
        "default":"rgba(0,0,0,0)",
        "label": "Accent"
      },
      {
        "type": "color",
        "id": "color_lines",
        "default":"rgba(0,0,0,0)",
        "label": "Lines"
      }
    ],
    "blocks": [
      {
        "type": "item",
        "name": "Counter",
        "settings": [
          {
            "type": "text",
            "id": "icon_name",
            "default": "check",
            "label": "Icon name"
          },
          {
            "type": "textarea",
            "id": "block_heading",
            "default": "Heading",
            "label": "Heading"
          },
          {
            "type": "textarea",
            "id": "block_text",
            "default": "Some descriptive text for your store.",
            "label": "Description"
          },
          {
            "type": "url",
            "id": "url",
			      "label": "Link"
          },
          {
            "type": "header",
            "content": "Counter"
          },
          {
            "type": "text",
            "id": "counterstart",
            "default": "0",
            "label": "Counter start",
            "info": "Integer"
          },
          {
            "type": "text",
            "id": "counterend",
            "default": "99",
            "label": "Counter end",
            "info": "Integer"
          },
          {
            "type": "range",
            "id": "decimal_places",
            "min": 0,
            "max": 2,
            "step": 1,
            "label": "Decimal places",
            "default": 0
          },
          {
            "type": "checkbox",
            "id": "grouping",
            "default": true,
            "label": "Use grouping",
            "info": "Works with option separator"
          },
          {
            "type": "text",
            "id": "separator",
            "default": ",",
            "label": "Separator"
          },
          {
            "type": "text",
            "id": "decimal",
            "default": ".",
            "label": "Decimal"
          },
          {
            "type": "text",
            "id": "prefix",
            "label": "Prefix"
          },
          {
            "type": "text",
            "id": "suffix",
            "label": "Suffix"
          },
          {
            "type": "header",
            "content": "Colors"
          },
          {
            "type": "color",
            "id": "color_text_link",
            "default":"rgba(0,0,0,0)",
            "label": "Heading"
          },
          {
            "type": "color",
            "id": "color_text_link_hover",
            "default":"rgba(0,0,0,0)",
            "label": "Heading link hover"
          },
          {
            "type": "color",
            "id": "color_desc",
            "default":"rgba(0,0,0,0)",
            "label": "Description"
          },
          {
            "type": "color",
            "id": "color_text_icons",
            "default": "rgba(0,0,0,0)",
            "label": "Icon"
          },
          {
            "type": "color",
            "id": "color_counter",
            "default": "rgba(0,0,0,0)",
            "label": "Counter"
          }
        ]
      }
    ],
    "presets": [
      {
      	"name": "t:names.counter_number_showcase",
        "category": "t:categories.storytelling",
        "blocks": [
          {
            "type": "item",
            "settings": {
              "counterstart": "0",
              "counterend": "9.3",
              "decimal_places": 1,
              "grouping": true,
              "separator": ",",
              "decimal": ".",
              "prefix": "",
              "suffix": "M"
            }
          },
          {
            "type": "item",
            "settings": {
              "counterstart": "0",
              "counterend": "24999",
              "decimal_places": 0,
              "grouping": true,
              "separator": ",",
              "decimal": ".",
              "prefix": "$",
              "suffix": ""
            }
          },
          {
            "type": "item",
            "settings": {
              "counterstart": "999",
              "counterend": "0",
              "decimal_places": 0,
              "grouping": true,
              "separator": ",",
              "decimal": ".",
              "prefix": "",
              "suffix": ""
            }
          }
        ]
      }
    ]
  }
{% endschema %}