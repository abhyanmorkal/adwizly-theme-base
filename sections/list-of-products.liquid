{{ 'section-list-of-products.css' | asset_url | stylesheet_tag }}

{%- capture __css -%}
{%- if section.settings.color_base   != "rgba(0,0,0,0)" -%}--color-base-section:{{ section.settings.color_base }};color:{{ section.settings.color_base }};{%- endif -%}
{%- if section.settings.color_accent != "rgba(0,0,0,0)" -%}--color-accent-section:{{ section.settings.color_accent }};{%- endif -%}
{%- if section.settings.color_lines  != "rgba(0,0,0,0)" -%}--color-lines:{{ section.settings.color_lines }};{%- endif -%}
{%- if section.settings.color_meta_products != "rgba(0,0,0,0)" -%}--color-meta-products-block:{{ section.settings.color_meta_products }};{%- endif -%}
{%- if section.settings.color_product_name != "rgba(0,0,0,0)" -%}--color-product-name-block:{{ section.settings.color_product_name }};{%- endif -%}
{%- if section.settings.color_product_name_hover != "rgba(0,0,0,0)" -%}
--color-product-name-block-hover:{{ section.settings.color_product_name_hover }};
--color-animation-underline:{{ section.settings.color_product_name_hover }};
{%- endif -%}
{%- if section.settings.color_price != "rgba(0,0,0,0)" -%}--color-price-main-block:{{ section.settings.color_price }};{%- endif -%}
{%- if section.settings.color_save_price != "rgba(0,0,0,0)" -%}--color-save-price-block:{{ section.settings.color_save_price }};{%- endif -%}
{%- if section.settings.color_old_price != "rgba(0,0,0,0)" -%}--color-old-price-main-block:{{ section.settings.color_old_price }};{%- endif -%}
{%- if section.settings.color_button_border2      != "rgba(0,0,0,0)" -%}
  --color-button-border_secondary-block:{{ section.settings.color_button_border2 }};
  --border-button-width_secondary:{{ settings.button_border_width_secondary }}px;
{%- endif -%}
{%- if section.settings.color_button_border_hover2!= "rgba(0,0,0,0)" -%}
  --color-button-border-hover_secondary:{{ section.settings.color_button_border_hover2 }};
  --border-button-width-hover_secondary:{{ settings.button_border_width_secondary }}px;
{%- endif -%}
{%- if section.settings.color_button_text2        != "rgba(0,0,0,0)" -%}--color-button-text_secondary:{{ section.settings.color_button_text2 }};{%- endif -%}
{%- if section.settings.color_button_text_hover2  != "rgba(0,0,0,0)" -%}--color-button-text-hover_secondary:{{ section.settings.color_button_text_hover2 }};{%- endif -%}
{%- if section.settings.show_button_bg2 -%}
{%- if section.settings.color_button_gradient2 != blank or section.settings.color_button2 != "rgba(0,0,0,0)" -%}
--color-button-block_secondary:{%- if section.settings.color_button_gradient2 == blank -%}{{ section.settings.color_button2 }}{%- else -%}{{ section.settings.color_button_gradient2 }}{%- endif -%};
{%- endif -%}
{%- else -%}
--color-button-block_secondary:rgba(0,0,0,0);
{%- endif -%}
{%- if section.settings.show_button_bg_hover2 -%}
{%- if section.settings.color_button_gradient_hover2 != blank or section.settings.color_button_hover2 != "rgba(0,0,0,0)" -%}  
--color-button-hover-block_secondary:{%- if section.settings.color_button_gradient_hover2 == blank -%}{{ section.settings.color_button_hover2 }}{%- else -%}{{ section.settings.color_button_gradient_hover2 }}{%- endif -%};
{%- endif -%}
{%- else -%}
--color-button-hover-block_secondary:rgba(0,0,0,0);
{%- endif -%}
{%- if section.settings.show_button_bg_hover2 == false -%}
--color-button-opacity-hover_secondary:0;
{%- endif -%}
{%- if section.settings.show_shadow_button2 -%}
{%- if section.settings.color_base != "rgba(0,0,0,0)" or section.settings.color_shadow_button2 != "rgba(0,0,0,0)" -%}
{%- assign shadow_opacity = settings.shadow_opacity_button_secondary | divided_by: 100.00 -%}
{%- if section.settings.color_shadow_button2 != "rgba(0,0,0,0)" -%}{%- assign __color = section.settings.color_shadow_button2 -%}{%- else -%}{%- assign __color = section.settings.color_base -%}{%- endif -%}
--shadow-button_secondary: {{ settings.horizontal_length_button_secondary }}px {{ settings.vertical_length_button_secondary }}px {{ settings.blur_radius_button_secondary }}px 0 {{ __color | color_modify: 'alpha', shadow_opacity }};
{%- endif -%}
{%- if section.settings.color_base != "rgba(0,0,0,0)" or section.settings.color_shadow_hover_button2 != "rgba(0,0,0,0)" -%}
{%- assign shadow_opacity = settings.shadow_opacity_hover_button_secondary | divided_by: 100.00 -%}
{%- if section.settings.color_shadow_hover_button2 != "rgba(0,0,0,0)" -%}{%- assign __color = section.settings.color_shadow_hover_button2 -%}{%- else -%}{%- assign __color = section.settings.color_base -%}{%- endif -%}
--shadow-button-hover_secondary: {{ settings.horizontal_length_hover_button_secondary }}px {{ settings.vertical_length_hover_button_secondary }}px {{ settings.blur_radius_hover_button_secondary }}px 0 {{ __color | color_modify: 'alpha', shadow_opacity }};
{%- endif -%}
{%- else -%}
--shadow-button_secondary:none;
--shadow-button-hover_secondary:none;
{%- endif -%}
{%- endcapture -%}
{%- if __css != blank -%}
<style>
#theme-section-{{ section.id }}{
{{ __css }}
}
</style>
{%- endif -%}

{%- render "section-css-background", section:section -%}
{%- render "section-component-top-line", section:section -%}
{%- capture page_width -%}{%- if section.settings.width != "default" %}{{ section.settings.width }}{%- else -%}{{ settings.page_width_main }}{%- endif -%}{%- endcapture -%}
{%- assign section_settings_background = false -%}{%- if section.settings.background != 'hide' and section.settings.background_width == "content_width" -%}{%- assign section_settings_background = true -%}{%- endif -%}

<div id="theme-section-{{ section.id }}"
     class="{% if section.settings.show_lines == false or section.settings.background == 'hide' %}top-spacing-{{ section.settings.top_spacing }}{% endif %}{% if section.settings.background != 'hide' and section.settings.background_width == "fullwidth" %} section-background section-background--{{ section.settings.background_spacing }}{% endif %}"
     data-section-name="list-of-products">
  <div class="{{ page_width }}{% if section_settings_background %} section-background--mobile-width{% endif %}">
  {%- if section_settings_background -%}<div class="section-background section-background--{{ section.settings.background_spacing }} border__radius">{%- endif -%}

    {%- render "section-heading" section:section -%}
    {%- assign __collection = section.settings.collection -%}
    <div class="page-grid-1 no-row-gap">
        {%- if __collection != blank -%}
        {%- for product in __collection.products limit: section.settings.product_limit -%}
            {%- liquid
            if section.settings.image_ratio != 'auto'
            assign image_ratio = section.settings.image_ratio
            else
              assign image_ratio = product.featured_media.aspect_ratio
              if product.featured_media.aspect_ratio == nil
              assign image_ratio = 1
              endif
            endif
            -%}
            {%- assign last_characters = 'general.abbreviation_of_text_in_a_section.last_characters' | t -%}

            <a href="{{ product.url }}" class="list-of-products clear-underline position-relative hover-area{% if settings.product_card_image_resize == "contain" %} product-card-image--contain{% endif %}">
              {%- assign image = product.featured_media -%}
              {%- if image != blank -%}
              <div class="list-of-products__image-holder image-hover-box__container{% if section.settings.image_ratio == '1.00' %} image-hover-box--circle{% endif %}">
                {%- render "component-image",
                    image_ratio_value: image_ratio,
                    image_source: image,
                    section_index: section.index,
                    placeholder_icon: placeholder_name
                -%}
              </div>
              {%- endif -%}
              <div class="list-of-products__content mt--first-child-0">
                <div class="list-of-products__content__heading">
                    <div class="product-card-name-size list-of-products__content__heading__text{% if section.settings.hover_underline %} animation-underline{% endif %}">
                        {%- if section.settings.truncate_product_name -%}
                        {{ product.title | escape | truncate: 48,last_characters }}
                        {%- else -%}
                        {{ product.title | escape }}
                        {%- endif -%}
                    </div>
                </div>
                {%- if section.settings.show_vendor -%}
                <div class="body3 list-of-products__content__vendor">{{ product.vendor }}</div>
                {%- endif -%}
                {%- if section.settings.show_price -%}
                <div class="list-of-products__content__price">
                    {%- render 'price', product: product, size:settings.product_card_price_size -%}
                </div>
                {%- endif -%}
              </div>
            </a>
        {%- endfor -%}
        {%- else -%}
        {%- for i in (1..section.settings.product_limit) -%}
            {%- capture placeholder_name -%}
            {%- cycle 'product-apparel-1', 'product-apparel-2', 'product-apparel-3', 'product-apparel-4' -%}
            {%- endcapture -%}
            <div class="list-of-products hover-area">
              <div class="list-of-products__image-holder image-hover-box__container{% if section.settings.image_ratio == '1.00' %} image-hover-box--circle{% endif %}">
                {%- render "component-image",
                    image_ratio_value: section.settings.image_ratio,
                    image_source: "",
                    section_index: section.index,
                    placeholder_icon: placeholder_name
                -%}
              </div>
              <div class="list-of-products__content mt--first-child-0">
                <div class="list-of-products__content__heading">
                    <div class="product-card-name-size list-of-products__content__heading__text{% if section.settings.hover_underline %} animation-underline{% endif %}">Product Name</div>
                </div>
                {%- if section.settings.show_vendor -%}
                <div class="body3 list-of-products__content__vendor">Vendor</div>
                {%- endif -%}
                {%- if section.settings.show_price -%}
                <div class="list-of-products__content__price">
                  <div class="price">
                    <div class="price__regular body3">€19,95{% if settings.currency_code_enabled %} USD{% endif %}</div>
                    <div class="price__sale {{ settings.product_card_price_size }} mt3">€15,95{% if settings.currency_code_enabled %} USD{% endif %}</div>
                  </div>
                </div>
                {%- endif -%}
              </div>
            </div>
        {%- endfor -%}
        {%- endif -%}

    </div>

    {%- if section.settings.link_name != blank and __collection.products.size > section.settings.product_limit -%}
    <div class="mt40 page-grid-1 {{ section.settings.heading_aligment }}">
      <div>
        <a href="{{ __collection.url }}" class="btn btn--border btn__transition-text btn-wide">
          <div class="btn__texts">
            <span class="btn__top-text is-visible">{{ section.settings.link_name }}</span>
            <span class="btn__bottom-text is-hidden">{{ section.settings.link_name }}</span>
          </div>
        </a>
      </div>
    </div>
    {%- elsif __collection == blank -%}
    <div class="mt40 page-grid-1 {{ section.settings.heading_aligment }}">
      <div>
        <div class="btn btn--border btn__transition-text btn-wide">
          <div class="btn__texts">
            <span class="btn__top-text is-visible">{{ section.settings.link_name }}</span>
            <span class="btn__bottom-text is-hidden">{{ section.settings.link_name }}</span>
          </div>
        </div>
      </div>
    </div>
    {%- endif -%}

    {% if section_settings_background %}</div>{%- endif -%}
  </div>
</div>

{% schema %}
  {
    "name": "t:names.list_of_products",
  	"tag": "section",
    "disabled_on": {
      "groups": ["header","footer","custom.popups"]
    },
    "settings": [
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      },
      {
        "type": "header",
        "content": "Heading"
      },
      {
        "type": "text",
        "id": "main_subheading",
        "default": "Subheading",
        "label": "Subheading"
      },
      {
        "type": "text",
        "id": "main_heading",
        "default": "t:names.list_of_products",
        "label": "Heading"
      },
      {
        "type": "textarea",
        "id": "main_desc",
        "default": "Highlight the best collections in your store",
        "label": "Description"
      },
      {
        "type": "select",
        "id": "heading_aligment",
        "options": [
          {
            "value": "text-left",
            "label": "Left"
          },
          {
            "value": "text-center",
            "label": "Center"
          }
        ],
        "default": "text-center",
        "label": "Heading alignment"
      },
      {
        "type": "header",
        "content": "Layout"
      },
      {
        "type": "select",
        "id": "top_spacing",
        "options": [
          {
            "value": "none",
            "label": "None"
          },
          {
            "value": "small",
            "label": "Small"
          },
          {
            "value": "medium",
            "label": "Medium"
          },
          {
            "value": "normal",
            "label": "Normal"
          }
        ],
        "default": "normal",
        "label": "Top spacing"
      },
      {
        "type": "select",
        "id": "width",
        "options": [
          {
            "value": "default",
            "label": "Default"
          },
          {
            "value": "page-width",
            "label": "Boxed"
          },
          {
            "value": "page-wide",
            "label": "Wide"
          }
        ],
        "default": "default",
        "label": "Width",
        "info": "The Wide option works for screens with 1440px width and more."
      },
      {
        "type": "header",
        "content": "Link"
      },
      {
        "type": "text",
        "id": "link_name",
        "default": "Shop All",
        "label": "Link name"
      },
      {
        "type": "header",
        "content": "Products"
      },
      {
        "type": "select",
        "id": "image_ratio",
        "options": [
          {
            "value": "auto",
            "label": "Auto"
          },
          {
            "value": "0.75",
            "label": "Portrait (3:4)"
          },
          {
            "value": "1.333333",
            "label": "Landscape (4:3)"
          },
          {
            "value": "1",
            "label": "Square (1:1)"
          },
          {
            "value": "1.00",
            "label": "Round (1:1)"
          },
          {
            "value": "0.5625",
            "label": "Social story (9:16)"
          },
          {
            "value": "1.777777",
            "label": "Widescreen (16:9)"
          }
        ],
        "default": "auto",
        "label": "Image ratio"
      },
      {
        "type": "range",
        "id": "product_limit",
        "min": 2,
        "max": 50,
        "step": 1,
        "default": 12,
        "label": "Products"
      },
      {
        "type": "checkbox",
        "id": "show_vendor",
        "default": true,
        "label": "Show vendor"
      },
      {
        "type": "checkbox",
        "id": "show_price",
        "default": true,
        "label": "Show price"
      },
      {
        "type": "checkbox",
        "id": "truncate_product_name",
        "default": false,
        "label": "Truncate product name"
      },
      {
        "type": "checkbox",
        "id": "hover_underline",
        "default": true,
        "label": "Underline on hover"
      },
      {
        "type": "header",
        "content": "Dividing line"
      },
      {
        "type": "checkbox",
        "id": "show_lines",
        "default": false,
        "label": "Show"
      },
      {
        "visible_if": "{{ section.settings.show_lines == true }}",
        "type": "select",
        "id": "lines_width",
        "options": [
          {
            "value": "fullwidth",
            "label": "Fullwidth"
          },
          {
            "value": "content_width",
            "label": "Content width"
          }
        ],
        "default": "fullwidth",
        "label": "Width",
        "info": "Doesn't work on mobile phone"
      },
      {
        "type": "header",
        "content": "Background"
      },
      {
        "type": "select",
        "id": "background",
        "options": [
          {
            "value": "hide",
            "label": "Hide"
          },
          {
            "value": "color",
            "label": "Color"
          },
          {
            "value": "gradient",
            "label": "Gradient"
          },
          {
            "value": "image",
            "label": "Image"
          }
        ],
        "default": "hide",
        "label": "Background"
      },
      {
        "visible_if": "{{ section.settings.background == 'color' }}",
        "type": "color",
        "id": "color_background",
        "default": "rgba(0,0,0,0)",
        "label": "Color"
      },
      {
        "visible_if": "{{ section.settings.background == 'gradient' }}",
        "type": "color_background",
        "id": "gradient",
        "label": "Gradient"
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "image_picker",
        "id": "background_image",
        "label": "Image"
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "image_picker",
        "id": "background_image_mobile",
        "label": "Image mobile"
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "select",
        "id": "imagealign",
        "label": "Image position",
        "info": "Works for all screens",
        "default": "center",
        "options": [
          {
            "value": "top",
            "label": "Top"
          },
          {
            "value": "center",
            "label": "Center"
          },
          {
            "value": "bottom",
            "label": "Bottom"
          }
        ]
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "select",
        "id": "imagesize",
        "label": "Image size",
        "info": "Works for all screens",
        "default": "cover",
        "options": [
          {
            "value": "cover",
            "label": "Full background size"
          },
          {
            "value": "contain",
            "label": "Contain"
          }
        ]
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "range",
        "id": "image_overlay_opacity",
        "min": 0,
        "max": 100,
        "step": 10,
        "unit": "%",
        "label": "Image overlay opacity",
        "default": 0
      },
      {
        "visible_if": "{{ section.settings.background == 'image' }}",
        "type": "color",
        "id": "image_overlay_color",
        "default":"rgba(0,0,0,0)",
        "label": "Image overlay color"
      },
      {
        "visible_if": "{{ section.settings.background != 'hide' }}",
        "type": "select",
        "id": "background_width",
        "options": [
          {
            "value": "fullwidth",
            "label": "Fullwidth"
          },
          {
            "value": "content_width",
            "label": "Content width"
          }
        ],
        "default": "fullwidth",
        "label": "Width"
      },
      {
        "visible_if": "{{ section.settings.background != 'hide' }}",
        "type": "select",
        "id": "background_spacing",
        "options": [
          {
            "value": "none",
            "label": "None"
          },
          {
            "value": "small",
            "label": "Small"
          },
          {
            "value": "medium",
            "label": "Medium"
          },
          {
            "value": "normal",
            "label": "Normal"
          }
        ],
        "default": "normal",
        "label": "Top, bottom spacing"
      },
      {
        "visible_if": "{{ section.settings.background != 'hide' }}",
        "type": "checkbox",
        "id": "remove_bottom_spacing",
        "default": false,
        "label": "Remove bottom spacing"
      },
      {
        "type": "header",
        "content": "Colors"
      },
      {
        "type": "color",
        "id": "color_base",
        "default":"rgba(0,0,0,0)",
        "label": "Base"
      },
      {
        "type": "color",
        "id": "color_accent",
        "default":"rgba(0,0,0,0)",
        "label": "Accent"
      },
      {
        "type": "color",
        "id": "color_lines",
        "default":"rgba(0,0,0,0)",
        "label": "Lines"
      },
      {
        "type": "header",
        "content": "Product card color"
      },
      {
        "type": "color",
        "id": "color_meta_products",
        "default": "rgba(0,0,0,0)",
        "label": "Vendor"
      },
      {
        "type": "color",
        "id": "color_product_name",
        "default": "rgba(0,0,0,0)",
        "label": "Product name"
      },
      {
        "type": "color",
        "id": "color_product_name_hover",
        "default": "rgba(0,0,0,0)",
        "label": "Product name hover"
      },
      {
        "type": "color",
        "id": "color_price",
        "default": "rgba(0,0,0,0)",
        "label": "Regular Price"
      },
      {
        "type": "color",
        "id": "color_save_price",
        "default": "rgba(0,0,0,0)",
        "label": "Sale Price"
      },
      {
        "type": "color",
        "id": "color_old_price",
        "default": "rgba(0,0,0,0)",
        "label": "Old price"
      },
      {
        "type": "header",
        "content": "Link button"
      },
      {
        "type": "checkbox",
        "id": "show_button_bg2",
        "default": true,
        "label": "Show background"
      },
      {
        "visible_if": "{{ section.settings.show_button_bg2 == true }}",
        "type": "color",
        "id": "color_button2",
        "default":"rgba(0,0,0,0)",
        "label": "Background"
      },
      {
        "visible_if": "{{ section.settings.show_button_bg2 == true }}",
        "type": "color_background",
        "id": "color_button_gradient2",
        "label": "Background gradient"
      },
      {
        "type": "color",
        "id": "color_button_border2",
        "default":"rgba(0,0,0,0)",
        "label": "Border"
      },
      {
        "type": "color",
        "id": "color_button_text2",
        "default":"rgba(0,0,0,0)",
        "label": "Text"
      },
      {
        "type": "checkbox",
        "id": "show_button_bg_hover2",
        "default": true,
        "label": "Show background on hover"
      },
      {
        "visible_if": "{{ section.settings.show_button_bg_hover2 == true }}",
        "type": "color",
        "id": "color_button_hover2",
        "default":"rgba(0,0,0,0)",
        "label": "Background hover"
      },
      {
        "visible_if": "{{ section.settings.show_button_bg_hover2 == true }}",
        "type": "color_background",
        "id": "color_button_gradient_hover2",
        "label": "Background gradient hover"
      },
      {
        "type": "color",
        "id": "color_button_border_hover2",
        "default":"rgba(0,0,0,0)",
        "label": "Border hover"
      },
      {
        "type": "color",
        "id": "color_button_text_hover2",
        "default":"rgba(0,0,0,0)",
        "label": "Text hover"
      },
      {
        "type": "checkbox",
        "id": "show_shadow_button2",
        "default": true,
        "label": "Enable shadow"
      },
      {
        "visible_if": "{{ section.settings.show_shadow_button2 == true }}",
        "type": "color",
        "id": "color_shadow_button2",
        "default":"rgba(0,0,0,0)",
        "label": "Shadow"
      },
      {
        "visible_if": "{{ section.settings.show_shadow_button2 == true }}",
        "type": "color",
        "id": "color_shadow_hover_button2",
        "default":"rgba(0,0,0,0)",
        "label": "Shadow hover"
      }
    ],
    "presets": [
      {
      	"name": "t:names.list_of_products",
        "category": "t:categories.products"
      }
    ]
  }
{% endschema %}