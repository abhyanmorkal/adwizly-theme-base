{% comment %}
  Article card component for grids 

  Accepts:
  - section: {Object} Section paramatres object
  - block: {Object} Block paramatres object
  - article: {Object} Article paramatres object
  - image_ratio_value: Number

  Usage:
  {%- render "article-card-sidebar",
      section:section,
      block:block,
      image_ratio_value: block.settings.image_ratio,
      page_width: page_width
  -%}
{% endcomment %}
{%- assign last_characters = 'general.abbreviation_of_text_in_a_section.last_characters' | t -%}
<div class="blog-posts-sidebar {% if section.settings.image_hover == "default" %}{{ settings.image_hover }}{% else %}{{ section.settings.image_hover }}{% endif %}{% if block.settings.align_content == "center" %} align-items-center{% endif %}">
  {%- if block.settings.show_image and article.image != blank -%}
  <a href="{{ article.url }}" class="image-hover-box__container{% if block.settings.image_ratio == '1.00' %} image-hover-box--circle{% endif %}">
    {%- render "component-image",
        image_ratio_value: block.settings.image_ratio,
        image_source: article.image
    -%}
  </a>
  {%- endif -%}

  {%- capture content -%}
  {%- liquid
  if block.settings.showtags and article.tags.size > 0
  assign tags = true
  else
  assign tags = false
  endif
  -%}
  {%- if tags or block.settings.show_date or block.settings.show_author -%}
  <ul class="unstyle-ul blog-posts__meta body3">
    {%- if block.settings.show_date -%}
    <li class="author-toolbar__item" itemprop="dateCreated pubdate datePublished">
      <span>{{- article.published_at | time_tag: format: "month_day_year" -}}</span>
    </li>
    {%- endif -%}            
    {%- if block.settings.show_author -%}
    <li class="author-toolbar__item" itemprop="author" itemscope itemtype="http://schema.org/Person">
      <span itemprop="name">{{ article.author -}}</span>
    </li>
    {%- endif -%}
    {%- if tags -%}
    <li class="author-toolbar__item author-toolbar__item__tags">
      <span>
        {% for tag in article.tags %}
        {%- assign tag_html = "<span>" | append: tag | append: "</span>" -%}
        {{ tag_html | link_to_tag: tag | replace: '<a', '<a class="link link__base-to_accent-color"' }}{% unless forloop.last %}, {% endunless %}
        {% endfor %}
      </span>
    </li>
    {%- endif -%}
  </ul>
  {%- endif -%}

  <h6 class="blog-posts__heading mt0 mb0">
    <a href="{{ article.url }}" class="clear-underline heading-color-block-hover{% if block.settings.hover_underline %} animation-underline{% endif %}">
      {%- if block.settings.truncate_post_heading -%}
      {{ article.title | escape | truncate: 63,last_characters }}
      {%- else -%}
      {{ article.title | escape }}
      {%- endif -%}
    </a>
  </h6>
  
  {%- if block.settings.excerpt != 'hide' -%}
  {%- if article.excerpt.size > 0 or article.content.size > 0 -%}
  <div class="blog-posts__excerpt section__richtext__editor body2">
    {%- if article.excerpt.size > 0 -%}
      {%- if block.settings.excerpt == 'show_truncated' -%}
      {{ article.excerpt | strip_html | truncatewords: 20,last_characters }}
      {%- else -%}
      {{ article.excerpt }}
      {%- endif -%}
    {%- else -%}
      {%- if block.settings.excerpt == 'show_truncated' -%}
      {{ article.content | strip_html | truncatewords: 20,last_characters }}
      {%- else -%}
      {{ article.content }}
      {%- endif -%}
    {%- endif -%}
  </div>
  {%- endif -%}
  {%- endif -%}

  {%- if block.settings.blog.comments_enabled? and block.settings.show_comment_count -%}
  {%- if article.comments.size > 0 -%}{%- assign comment_url = article.url | append: '#comments' -%}{%- else -%}{%- assign comment_url = article.url | append: '#addcomment' -%}{%- endif -%}
  <div class="blog-posts__comments__container">
    <div class="blog-posts__comments body3">
      <a href="{{ comment_url }}" class="clear-underline">
		{{- 'icon-chat' | append: settings.system_icon_thickness | inline_asset_content -}}
        {{ article.comments_count }}
      </a>
    </div>
  </div>
  {%- endif -%}
  {%- endcapture -%}
  {%- if content != blank -%}
  <div class="blog-posts__container">
    {{ content }}
  </div>
  {%- endif -%}
</div>