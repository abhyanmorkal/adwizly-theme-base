{%- capture section_styles -%}
{%- if section.settings.background != 'hide' -%}
{%- liquid
	capture color
	if section.settings.background == 'color'
    echo section.settings.color_background
    else
    echo section.settings.gradient
    endif
    endcapture
-%}
{%- if color != "rgba(0,0,0,0)" and color != blank and section.settings.background != 'image' -%}
#theme-section-{{ section.id }}{
  --color-section-background: {{ color }};
}
{%- endif -%}
{%- assign image = section.settings.background_image -%}
{%- assign image_mobile = section.settings.background_image_mobile -%}
{%- if section.settings.background == 'image' and image != blank -%}
#theme-section-{{ section.id }}.section-background:has(.section-background__elements),
#theme-section-{{ section.id }} .section-background:has(.section-background__elements){
  background:transparent;
  position:relative;
}
#theme-section-{{ section.id }} .section-background__elements{
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:-1;
  overflow: hidden;
  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  -webkit-transform: translate3d(0, 0, 0);
  -moz-transform: translate3d(0, 0, 0);
  background: var(--color-section-background-custom, var(--color-section-background));
}
@media (min-width:577px){
  #theme-section-{{ section.id }} .section-background.border__radius .section-background__elements{
    border-radius:var(--radius);
  }
}
#theme-section-{{ section.id }} .section-background__elements__item{
  width:100%;
  height:100%;
}
#theme-section-{{ section.id }}.section-background:not(:has(.section-background__elements)),
#theme-section-{{ section.id }} .section-background:not(:has(.section-background__elements)),
#theme-section-{{ section.id }} .section-background__elements__item{
  {%- assign opacity = section.settings.image_overlay_opacity | divided_by: 100.00 -%}
  {%- if section.settings.image_overlay_color != "rgba(0,0,0,0)" -%}
  --color-image-overlay:{{ section.settings.image_overlay_color.red }}, {{ section.settings.image_overlay_color.green }}, {{ section.settings.image_overlay_color.blue }};
  {%- endif -%}
  background-image:linear-gradient(rgba(var(--color-image-overlay), {{ opacity }}),rgba(var(--color-image-overlay), {{ opacity }})), url("{{ image | image_url: width: image.width }}");
  background-position: {{ section.settings.imagealign }};
  background-repeat: no-repeat;
  background-size: {{ section.settings.imagesize }};
}
{%- endif -%}
{%- if section.settings.background == 'image' and image_mobile != blank -%}
@media (max-width:576px){
  #theme-section-{{ section.id }}.section-background:not(:has(.section-background__elements)),
  #theme-section-{{ section.id }} .section-background:not(:has(.section-background__elements)),
  #theme-section-{{ section.id }} .section-background__elements__item{
    {%- assign opacity = section.settings.image_overlay_opacity_mobile | divided_by: 100.00 -%}
    {%- if section.settings.image_overlay_color_mobile != "rgba(0,0,0,0)" -%}
    --color-image-overlay:{{ section.settings.image_overlay_color_mobile.red }}, {{ section.settings.image_overlay_color_mobile.green }}, {{ section.settings.image_overlay_color_mobile.blue }};
    {%- endif -%}
    background-image:linear-gradient(rgba(var(--color-image-overlay), {{ opacity }}),rgba(var(--color-image-overlay), {{ opacity }})), url("{{ image_mobile | image_url: width: image_mobile.width }}");
    background-position: {{ section.settings.imagealign }};
    background-repeat: no-repeat;
    background-size: {{ section.settings.imagesize }};
  }
}
{%- endif -%}
{%- if section.settings.remove_bottom_spacing -%}
#theme-section-{{ section.id }}.section-background,
#theme-section-{{ section.id }} .section-background{
  padding-bottom: 0;
}
{%- endif -%}
{%- endif -%}
{%- if section.settings.color_lines and section.settings.color_lines != "rgba(0,0,0,0)" -%}
#theme-section-{{ section.id }}-line{
--color-lines:{{ section.settings.color_lines }};
}
{%- endif -%}
{%- if __css != blank -%}
#theme-section-{{ section.id }}{
{{ __css }}
}
{%- endif -%}
{%- endcapture -%}
{%- if section_styles != blank -%}
<style>{{ section_styles }}</style>
{%- endif -%}