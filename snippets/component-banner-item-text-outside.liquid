{%- liquid
    if block.settings.url != blank
    assign html_tag_open = '<a' | append: ' href="' | append: block.settings.url | append:'" ' | append: 'aria-label="' | append:block.settings.heading_text | append:'"'
    assign html_tag_close = '</a>'
    else
    assign html_tag_open = '<div'
    assign html_tag_close = '</div>'
    endif
-%}
<div class="section-media-buttons-parent banner-item-text-outside a--no-hover-color hover-area {% if section.settings.image_hover == "default" %}{{ settings.image_hover }}{% else %}{{ section.settings.image_hover }}{% endif %}">
  {{ html_tag_open }} class="image-hover-box__container{% if image_ratio_value == '1.00' %} image-aspratio-round--desktop{% endif %}{% if image_ratio_mobile_value == '1.00' %} image-aspratio-round--mobile{% endif %}">
    {%- assign main_image_source = block.settings.image -%}
    {%- capture video_html -%}
    {%- if block.settings.video != blank and block.settings.content_type == "video" -%}
    <video-js class="section__video-media__box banner__block-media-box"
              data-type="video"
              data-autoplay="{% if block.settings.video_slide_mode contains "autoplay" %}true{% else %}false{% endif %}"
              data-buttons="{% unless block.settings.video_slide_mode contains "autoplay" %}true{% else %}false{% endunless %}">
      <video class="slide-video slide-media" playsinline=""{% if block.settings.video_slide_mode contains "muted" %} muted=""{% endif %} preload="metadata" loop="">
        {%- assign sources = block.settings.video.sources | last -%}
        <source src="{{ sources.url }}"/>
      </video>
    </video-js>
    {%- liquid
        if main_image_source == blank
        assign main_image_source = block.settings.video.preview_image
        endif
    -%}
    {%- elsif block.settings.video_url != blank and block.settings.content_type == "video" -%}
    <video-youtube-js class="section__video-media__box section__video-media__youtube"
                      data-type="youtube"
                      data-mute="{% if block.settings.video_slide_mode contains "muted" %}true{% else %}false{% endif %}"
                      data-autoplay="{% if block.settings.video_slide_mode contains "autoplay" %}true{% else %}false{% endif %}"
                      data-buttons="{% unless block.settings.video_slide_mode contains "autoplay" %}true{% else %}false{% endunless %}">
      <div id="{{ block.settings.video_url.id }}_____{{ section.id }}{{ forloop.index }}" class="embed-player"></div>
    </video-youtube-js>
    {%- endif -%}
    {%- endcapture -%}

    {%- render "component-image",
        image_ratio_value: image_ratio_value,
        image_ratio_mobile_value: image_ratio_mobile_value,
        image_source: main_image_source,
        image_mobile_source: block.settings.image_mobile,
        load_priority_low: load_priority_low,
        section_index: section.index,
        video_html:video_html,
        placeholder_icon: placeholder_icon
    -%}
    {%- if block.settings.image_hover != blank and block.settings.content_type != "video" -%}
    {%- render "component-image",
        image_ratio_value: image_ratio_value,
        image_ratio_mobile_value: image_ratio_mobile_value,
        image_source: block.settings.image_hover,
        image_mobile_source: "",
        load_priority_low: load_priority_low,
        section_index: section.index
    -%}
    {%- endif -%}
    {%- unless block.settings.video_slide_mode contains "autoplay" -%}
    {%- liquid
        assign enable_buttons = false
        if block.settings.video != blank and block.settings.content_type == "video"
        assign enable_buttons = true
        elsif block.settings.video_url != blank and block.settings.content_type == "video"
        assign enable_buttons = true
        endif
        -%}
    {%- if enable_buttons -%}
    <div class="section__video-media__ctrl section__video-media-ctrl--mobile section__video-media__ctrl--js">
      <div class="icon-play">{{- 'icon-play' | append: settings.system_icon_thickness | inline_asset_content -}}</div>
      <div class="icon-pause">{{- 'icon-pause' | append: settings.system_icon_thickness | inline_asset_content -}}</div>
    </div>
    {%- endif -%}
    {%- endunless -%}
  {{ html_tag_close }}

  {%- capture content -%}
  {%- if block.settings.heading_text != blank -%}
  {%- if block.settings.design_type == "type_text_over_image" or block.settings.url == blank -%}
  <p class="mt0 mb0 {{ block.settings.heading_size }} heading-color-block-main{% if block.settings.hover_underline %} animation-underline{% endif %}">{{ block.settings.heading_text }}</p>
  {%- else -%}
  <a href="{{ block.settings.url }}" class="mt0 mb0 {{ block.settings.heading_size }} heading-color-block-hover{% if block.settings.hover_underline %} animation-underline{% endif %}">{{ block.settings.heading_text }}</a>
  {%- endif -%}
  {%- endif -%}
    
  {%- if block.settings.desc != blank -%}<p class="mt10 body2">{{ block.settings.desc }}</p>{%- endif -%}
  {%- if block.settings.button_name != blank -%}
  <a href="{{ block.settings.url }}" class="btn btn__transition-text native-hover btn-wide mt16"
    {% if block.settings.url == blank %} aria-disabled="true"{% endif %}>
    <div class="btn__texts">
      <span class="btn__top-text is-visible">{{ block.settings.button_name }}</span>
      <span class="btn__bottom-text is-hidden">{{ block.settings.button_name }}</span>
    </div>
  </a>
  {%- endif -%}
  {%- endcapture -%}
  {%- if content != blank -%}
  <div class="display-flex display-flex--column{% if block.settings.text_align == 'text-center' %} align-items-center text-center{% else %} align-items-start{% endif %} mt-first-0 ">
    {{ content }}
  </div>
  {%- endif -%}
</div>